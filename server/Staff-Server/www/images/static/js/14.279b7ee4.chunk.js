(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[14],{397:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},409:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return c}))},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(1),r=n(2),c=n(5),i=n(0),o=n(6),l=n.n(o),s=n(41),u=n(57);function p(e){var t=e.className,n=e.direction,c=e.index,o=e.marginDirection,l=e.children,s=e.split,u=e.wrap,p=i.useContext(b),f=p.horizontalSize,d=p.verticalSize,m=p.latestIndex,O={};return p.supportFlexGap||("vertical"===n?c<m&&(O={marginBottom:f/(s?2:1)}):O=Object(a.a)(Object(a.a)({},c<m&&Object(r.a)({},o,f/(s?2:1))),u&&{paddingBottom:d})),null===l||void 0===l?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:O},l),c<m&&s&&i.createElement("span",{className:"".concat(t,"-split"),style:O},s))}var f=n(164),d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},b=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),m={small:8,middle:16,large:24};t.b=function(e){var t,n=i.useContext(u.b),o=n.getPrefixCls,O=n.space,v=n.direction,j=e.size,y=void 0===j?(null===O||void 0===O?void 0:O.size)||"small":j,x=e.align,g=e.className,h=e.children,w=e.direction,k=void 0===w?"horizontal":w,C=e.prefixCls,E=e.split,P=e.style,S=e.wrap,z=void 0!==S&&S,I=d(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),N=Object(f.a)(),T=i.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?m[e]:e||0}(e)}))}),[y]),D=Object(c.a)(T,2),_=D[0],B=D[1],G=Object(s.a)(h,{keepEmpty:!0}),R=void 0===x&&"horizontal"===k?"center":x,V=o("space",C),A=l()(V,"".concat(V,"-").concat(k),(t={},Object(r.a)(t,"".concat(V,"-rtl"),"rtl"===v),Object(r.a)(t,"".concat(V,"-align-").concat(R),R),t),g),F="".concat(V,"-item"),J="rtl"===v?"marginLeft":"marginRight",K=0,L=G.map((function(e,t){return null!==e&&void 0!==e&&(K=t),i.createElement(p,{className:F,key:"".concat(F,"-").concat(t),direction:k,index:t,marginDirection:J,split:E,wrap:z},e)})),M=i.useMemo((function(){return{horizontalSize:_,verticalSize:B,latestIndex:K,supportFlexGap:N}}),[_,B,K,N]);if(0===G.length)return null;var W={};return z&&(W.flexWrap="wrap",N||(W.marginBottom=-B)),N&&(W.columnGap=_,W.rowGap=B),i.createElement("div",Object(a.a)({className:A,style:Object(a.a)(Object(a.a)({},W),P)},I),i.createElement(b.Provider,{value:M},L))}},473:function(e,t,n){"use strict";var a=n(1),r=n(5),c=n(0),i=n(6),o=n.n(i),l=n(34),s=n(107),u=n(22),p=n(106),f=n(45),d=n(74),b=n(50),m=n(59),O=n(57),v=n(397),j=n(14),y=n(51),x=void 0,g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},h=c.forwardRef((function(e,t){var n=Object(l.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),i=Object(r.a)(n,2),s=i[0],h=i[1],w=function(t,n){var a;h(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},k=function(t){var n;w(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(x,t)},C=function(t){var n;w(!1,t),null===(n=e.onCancel)||void 0===n||n.call(x,t)},E=c.useContext(O.b).getPrefixCls,P=e.prefixCls,S=e.placement,z=e.children,I=e.overlayClassName,N=g(e,["prefixCls","placement","children","overlayClassName"]),T=E("popover",P),D=E("popconfirm",P),_=o()(D,I),B=c.createElement(b.a,{componentName:"Popconfirm",defaultLocale:m.a.Popconfirm},(function(t){return function(t,n){var r=e.okButtonProps,i=e.cancelButtonProps,o=e.title,l=e.cancelText,s=e.okText,u=e.okType,p=e.icon;return c.createElement("div",{className:"".concat(t,"-inner-content")},c.createElement("div",{className:"".concat(t,"-message")},p,c.createElement("div",{className:"".concat(t,"-message-title")},Object(v.a)(o))),c.createElement("div",{className:"".concat(t,"-buttons")},c.createElement(f.a,Object(a.a)({onClick:C,size:"small"},i),l||n.cancelText),c.createElement(f.a,Object(a.a)({onClick:k},Object(d.a)(u),{size:"small"},r),s||n.okText)))}(T,t)})),G=E();return c.createElement(p.a,Object(a.a)({},N,{prefixCls:T,placement:S,onVisibleChange:function(t){e.disabled||w(t)},visible:s,overlay:B,overlayClassName:_,ref:t,transitionName:Object(y.b)(G,"zoom-big",e.transitionName)}),Object(j.a)(z,{onKeyDown:function(e){var t,n;c.isValidElement(z)&&(null===(n=null===z||void 0===z?void 0:(t=z.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===u.a.ESC&&s&&w(!1,e)}(e)}}))}));h.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:c.createElement(s.a,null),disabled:!1},t.a=h},941:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(409),r=n(110),c=n(33),i=n.n(c),o=n(63),l=n(80),s=n(0),u=n(473),p=n(45),f=n(421),d=n(947),b=n(361),m=n(357),O=n(40),v=n(32),j=n(42),y=n(3),x=O.a.getAllApply,g=O.a.applyPass,h=O.a.applyTurn;function w(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],O=new s.useState([]),w=Object(l.a)(O,2),k=w[0],C=w[1],E=new s.useState(0),P=Object(l.a)(E,2),S=P[0],z=P[1],I=new s.useState(""),N=Object(l.a)(I,2),T=N[0],D=N[1],_=new s.useState(""),B=Object(l.a)(_,2),G=B[0],R=B[1],V=Object(s.useRef)(),A=Object(s.useRef)();A.current=G;var F=Object(s.useRef)();V.current=k;var J=[{title:"\u59d3\u540d",dataIndex:"username",key:"username"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u65f6\u95f4",dataIndex:"time",key:"time"},{title:"\u5929\u6570",dataIndex:"num",key:"num"},{title:"\u5185\u5bb9",dataIndex:"desc",key:"desc"},{title:"\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u72b6\u6001",key:"status",render:function(e){var t="";switch(e.status){case"0":t="\u5ba1\u6838\u4e2d";break;case"1":t="\u5df2\u901a\u8fc7";break;case"-1":t="\u5df2\u64a4\u9500";break;case"-2":t="\u5df2\u9a73\u56de"}return t}},{title:"\u64cd\u4f5c",dataIndex:"",key:"x",render:function(e){var t=function(){return Object(y.jsx)(u.a,{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t=e,console.log(t),R(t.userId),D(t._id),void c(!0);var t},title:"\u662f\u5426\u9a73\u56de",children:Object(y.jsx)(p.a,{type:"danger",children:"\u9a73\u56de"})})};return"0"===e.status?Object(y.jsxs)(f.b,{children:[Object(y.jsx)(p.a,{type:"primary",onClick:function(){return L(e)},children:"\u901a\u8fc7"}),Object(y.jsx)(t,{})]}):"1"===e.status?Object(y.jsx)(t,{}):"\u65e0\u6cd5\u64cd\u4f5c"}}];function K(){return(K=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F.current.state.value){e.next=7;break}return e.next=3,h(T,F.current.state.value);case 3:"200"===e.sent.code&&(Object(v.a)("\u9a73\u56de\u6210\u529f","success"),M(T,"-2"),c(!1),F.current.state.value="",Object(j.d)({type:"turn",message:"\u60a8\u7684\u4e00\u6761\u7533\u8bf7\u6d88\u606f\u88ab\u9a73\u56de",userId:A.current,applyId:T})),e.next=8;break;case 7:Object(v.a)("\u8bf7\u8f93\u5165\u9a73\u56de\u7406\u7531");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J.forEach((function(e){e.align="center"}));var L=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t._id);case 2:"200"===(n=e.sent).code?(Object(v.a)("\u7533\u8bf7\u901a\u8fc7","success"),M(t._id,"1"),Object(j.d)({type:"pass",message:"\u60a8\u7684\u4e00\u6761\u7533\u8bf7\u6d88\u606f\u901a\u8fc7",userId:t.userId,applyId:T})):Object(v.a)(n.msg);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e,t){k.find((function(t){return t._id===e})).status=t;for(var n=0,a=0;a<k.length;a++)k[a]._id===e&&(n=a);var c=Object(r.a)(k);c[n].status=t,C(c)};new s.useEffect((function(){W(1);var e=Object(j.i)((function(e){e&&setTimeout((function(){window.location.reload()}),2e3)}));return function(){e.off()}}),[V]);var W=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x(t);case 3:(r=e.sent).data&&(r.data.forEach((function(e){e.key=e._id,n.push(Object(a.a)(Object(a.a)({},e),e.staff))})),C(n),z(r.pageSize));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("section",{children:[Object(y.jsx)(d.a,{pagination:{total:S,onChange:function(e){W(e)}},columns:J,dataSource:k}),Object(y.jsx)(b.a,{title:"\u8bf7\u8f93\u5165\u9a73\u56de\u539f\u56e0",visible:n,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){return c(!1)},onOk:function(){return K.apply(this,arguments)},children:Object(y.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u539f\u56e0",ref:F})})]})}}}]);
//# sourceMappingURL=14.279b7ee4.chunk.js.map