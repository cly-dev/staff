(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[12],{406:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(1),s=n(2),i=n(4),r=n(0),c=n(6),o=n.n(c),l=n(33),u=n(59);function p(e){var t=e.className,n=e.direction,i=e.index,c=e.marginDirection,o=e.children,l=e.split,u=e.wrap,p=r.useContext(m),d=p.horizontalSize,f=p.verticalSize,h=p.latestIndex,b={};return p.supportFlexGap||("vertical"===n?i<h&&(b={marginBottom:d/(l?2:1)}):b=Object(a.a)(Object(a.a)({},i<h&&Object(s.a)({},c,d/(l?2:1))),u&&{paddingBottom:f})),null===o||void 0===o?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:b},o),i<h&&l&&r.createElement("span",{className:"".concat(t,"-split"),style:b},l))}var d=n(166),f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n},m=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};t.b=function(e){var t,n=r.useContext(u.b),c=n.getPrefixCls,b=n.space,j=n.direction,O=e.size,v=void 0===O?(null===b||void 0===b?void 0:b.size)||"small":O,x=e.align,g=e.className,y=e.children,k=e.direction,w=void 0===k?"horizontal":k,N=e.prefixCls,S=e.split,C=e.style,T=e.wrap,E=void 0!==T&&T,z=f(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),P=Object(d.a)(),F=r.useMemo((function(){return(Array.isArray(v)?v:[v,v]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[v]),I=Object(i.a)(F,2),G=I[0],B=I[1],D=Object(l.a)(y,{keepEmpty:!0}),L=void 0===x&&"horizontal"===w?"center":x,V=c("space",N),_=o()(V,"".concat(V,"-").concat(w),(t={},Object(s.a)(t,"".concat(V,"-rtl"),"rtl"===j),Object(s.a)(t,"".concat(V,"-align-").concat(L),L),t),g),R="".concat(V,"-item"),M="rtl"===j?"marginLeft":"marginRight",q=0,A=D.map((function(e,t){return null!==e&&void 0!==e&&(q=t),r.createElement(p,{className:R,key:"".concat(R,"-").concat(t),direction:w,index:t,marginDirection:M,split:S,wrap:E},e)})),H=r.useMemo((function(){return{horizontalSize:G,verticalSize:B,latestIndex:q,supportFlexGap:P}}),[G,B,q,P]);if(0===D.length)return null;var J={};return E&&(J.flexWrap="wrap",P||(J.marginBottom=-B)),P&&(J.columnGap=G,J.rowGap=B),r.createElement("div",Object(a.a)({className:_,style:Object(a.a)(Object(a.a)({},J),C)},z),r.createElement(m.Provider,{value:H},A))}},423:function(e,t,n){"use strict";n(0),n(424);var a=n(3);t.a=function(e){return Object(a.jsxs)("section",{className:"staff-header",children:[e.title,e.children]})}},424:function(e,t,n){},467:function(e,t,n){"use strict";var a=n(1),s=n(4),i=n(0),r=n(6),c=n.n(r),o=n(35),l=n(107),u=n(22),p=n(75),d=n(46),f=n(77),m=n(52),h=n(60),b=n(59),j=n(147),O=n(13),v=n(42),x=void 0,g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n},y=i.forwardRef((function(e,t){var n=Object(o.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),r=Object(s.a)(n,2),l=r[0],y=r[1],k=function(t,n){var a;y(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},w=function(t){var n;k(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(x,t)},N=function(t){var n;k(!1,t),null===(n=e.onCancel)||void 0===n||n.call(x,t)},S=i.useContext(b.b).getPrefixCls,C=e.prefixCls,T=e.placement,E=e.children,z=e.overlayClassName,P=g(e,["prefixCls","placement","children","overlayClassName"]),F=S("popover",C),I=S("popconfirm",C),G=c()(I,z),B=i.createElement(m.a,{componentName:"Popconfirm",defaultLocale:h.a.Popconfirm},(function(t){return function(t,n){var s=e.okButtonProps,r=e.cancelButtonProps,c=e.title,o=e.cancelText,l=e.okText,u=e.okType,p=e.icon;return i.createElement("div",{className:"".concat(t,"-inner-content")},i.createElement("div",{className:"".concat(t,"-message")},p,i.createElement("div",{className:"".concat(t,"-message-title")},Object(j.a)(c))),i.createElement("div",{className:"".concat(t,"-buttons")},i.createElement(d.a,Object(a.a)({onClick:N,size:"small"},r),o||n.cancelText),i.createElement(d.a,Object(a.a)({onClick:w},Object(f.a)(u),{size:"small"},s),l||n.okText)))}(F,t)})),D=S();return i.createElement(p.a,Object(a.a)({},P,{prefixCls:F,placement:T,onVisibleChange:function(t){e.disabled||k(t)},visible:l,overlay:B,overlayClassName:G,ref:t,transitionName:Object(v.b)(D,"zoom-big",e.transitionName)}),Object(O.a)(E,{onKeyDown:function(e){var t,n;i.isValidElement(E)&&(null===(n=null===E||void 0===E?void 0:(t=E.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===u.a.ESC&&l&&k(!1,e)}(e)}}))}));y.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:i.createElement(l.a,null),disabled:!1},t.a=y},916:function(e,t,n){},917:function(e,t,n){},988:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n(34),s=n.n(a),i=n(64),r=n(48),c=n(49),o=n(122),l=n(51),u=n(50),p=n(0),d=n(371),f=(n(916),n(917),n(406)),m=n(467),h=n(46),b=n(369),j=n(368),O=n(363),v=n(980),x=n(31),g=n(41),y=n(43),k=n(3),w=g.b.applyPost,N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleOk=function(){a.form.submit()},a.handleRef=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(a.props.data._id,t);case 2:n=e.sent,"200"===n.code&&(a.setState({visiable:!1}),Object(y.h)(a.props.data),Object(x.a)("\u7533\u8bf7\u6210\u529f,\u8bf7\u7b49\u5f85\u5ba1\u6838","success"),a.props.postpone(a.props.data._id,t.num));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={visiable:!1},console.log(e),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("section",{className:"backlog-task",children:[Object(k.jsxs)("span",{children:["\u6807\u9898:",this.props.data.title]}),Object(k.jsxs)("article",{children:["\u5185\u5bb9:",this.props.data.content?this.props.data.content:"\u6682\u65e0\u5185\u5bb9"]}),this.props.data.url&&Object(k.jsxs)(k.Fragment,{children:["\u76f8\u5173\u6587\u4ef6\u5730\u5740:",Object(k.jsx)("a",{href:this.props.data.url,download:this.props.title,children:this.props.data.url})]}),Object(k.jsx)("section",{className:"task-feedback",children:Object(k.jsxs)(f.b,{children:[Object(k.jsx)(m.a,{title:"\u786e\u8ba4\u5b8c\u6210\u4efb\u52a1",cancelText:"\u7a0d\u7b49",okText:"\u5b8c\u6210",onConfirm:function(){return e.props.Finsh(e.props.data._id,e.props.data.adminId)},children:Object(k.jsx)(h.a,{type:"primary",children:"\u5df2\u5b8c\u6210"})}),Object(k.jsxs)(h.a,{disabled:"0"!=this.props.data.status,onClick:function(){return e.setState({visiable:!0})},children:["0"===this.props.data.status&&"\u7533\u8bf7\u5ef6\u671f","2"===this.props.data.status&&"\u6b63\u5728\u5ba1\u6838\u4e2d","3"===this.props.data.status&&"\u5ef6\u671f".concat(this.props.data.postTime),"4"===this.props.data.status&&"\u672a\u901a\u8fc7"]})]})}),Object(k.jsx)(b.a,{width:"12.5rem",visible:this.state.visiable,title:"\u8bf7\u8f93\u5165\u5ef6\u8fdf\u5929\u6570\u548c\u7406\u7531",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){return e.setState({visiable:!1})},onOk:function(){return e.handleOk()},children:Object(k.jsxs)(j.a,{ref:function(t){return e.form=t},onFinish:this.handleRef,children:[Object(k.jsx)(j.a.Item,{label:"\u7406\u7531",name:"mask",rules:[{required:!0,message:"\u5929\u6570\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(k.jsx)(O.a,{style:{width:"100%"}})}),Object(k.jsx)(j.a.Item,{label:"\u5929\u6570",rules:[{required:!0,message:"\u5929\u6570\u4e0d\u80fd\u4e3a\u7a7a"}],name:"num",children:Object(k.jsx)(v.a,{style:{width:"100%"},max:"7",min:"0"})})]})})]})}}]),n}(p.Component),S=n(423),C=n(68),T=n(24),E=g.b.getTaskById,z=g.b.FinshTask,P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleFinsh=function(){var t=Object(i.a)(s.a.mark((function t(n,a){var i,r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.state,r=i.list,c=i.index,t.next=3,z(n);case 3:"200"==t.sent.code&&(Object(y.i)({username:T.a.getState.user.username,adminId:a}),Object(C.a)("\u68d2(\u0e51\u2022\u0300\u3142\u2022\u0301)\u0648\u2727","success"),e.setState({list:r.filter((function(e){return e._id!==n})),index:c-1>0?c-=1:0}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handlePostpone=function(){var t=Object(i.a)(s.a.mark((function t(n,a){var i,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.state.list,(r=i.find((function(e){return e._id===n}))).status="2",r.postTime=a,e.setState({list:i});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleScroll=function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){var t=n.target;if(console.log(Object(o.a)(e)),e.loadSuccess&&t.scrollHeight-(t.offsetHeight+t.scrollTop)<10)if(e.pageNum+=1,e.pgaeNum<=e.total){var a=e.state.list,s=e.handleGetTask(e.pageNum).data;a.push(s),e.setState({list:a})}else Object(C.a)("\u6ca1\u6709\u66f4\u591a\u4efb\u52a1\u5566")}),500);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.pageNum=1,e.loadSuccess=!1,e.timer=null,e.total=0,e.state={list:[],index:0},e}return Object(c.a)(n,[{key:"handleGetTask",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadSuccess=!1,e.next=3,E(t);case 3:if("200"!==(n=e.sent).code){e.next=8;break}return this.loadSuccess=!0,n.data.forEach((function(e){for(var t in e.admin)e[t]=e.admin[t]})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleGetTask(1);case 2:t=e.sent,this.total=t.pageSize<=8?t.pageSize/8+t.pageSize%8>0?1:0:1,this.setState({list:t.data}),this.client=Object(y.k)((function(e){e&&setTimeout((function(){window.location.reload()}),2e3)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.client&&this.client.off()}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("section",{className:"staff-backlog",children:[Object(k.jsx)(S.a,{title:"\u6211\u7684\u5f85\u529e"}),Object(k.jsx)("section",{className:"backLog-main",children:this.state.list.length?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("section",{className:"backLog-aside",onScroll:this.handleScroll,children:this.state.list.map((function(t,n){return Object(k.jsxs)("section",{className:"aside-item",onClick:function(){return e.setState({index:n})},children:[Object(k.jsx)(d.a,{className:"item-avatar",src:t.imgPath}),Object(k.jsxs)("section",{className:"item-info",children:[Object(k.jsxs)("section",{className:"info-name",children:[Object(k.jsxs)("span",{children:[t.name,"-",t.position]}),Object(k.jsxs)("i",{children:[" ",t.tartTime]})]}),Object(k.jsx)("section",{className:"info-content",children:t.title})]})]},n)}))}),Object(k.jsx)("section",{className:"backLog-content",children:Object(k.jsx)(N,{postpone:this.handlePostpone,Finsh:this.handleFinsh,data:this.state.list.length?this.state.list[this.state.index]:"\u6682\u65e0\u4efb\u52a1"})})]}):Object(k.jsx)("section",{className:"backlog-null",children:Object(k.jsx)("span",{children:"\u6682\u65e0\u4efb\u52a1"})})})]})}}]),n}(p.Component)}}]);
//# sourceMappingURL=12.62a559e7.chunk.js.map