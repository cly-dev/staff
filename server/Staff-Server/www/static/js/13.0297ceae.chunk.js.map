{"version":3,"sources":["components/Header/header.jsx","components/isLoading/skeleton.jsx","pages/Staff/OldNotice/OldNotice.jsx"],"names":["header","props","className","title","children","skeleton","isLoading","map","item","index","avatar","isAvatar","active","isActive","getNotice","Staff","readNotice","topNotice","OldNotice","handleTop","val","a","listData","state","_id","result","code","message","window","location","reload","msg","handleRead","status","setState","handleGetNotice","pageNum","loading","length","data","forEach","value","Array","isArray","resource","push","admin","notice","total","pageSize","this","locale","emptyText","itemLayout","size","onChange","page","Item","Meta","src","imgPath","description","name","position","style","color","createTime","content","file","href","download","float","disabled","onClick","type","React","Component"],"mappings":"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","file":"static/js/13.0297ceae.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./header.scss\";\r\nfunction header(props) {\r\n  return (\r\n    <section className=\"staff-header\">\r\n      {props.title}\r\n\r\n      {props.children}\r\n    </section>\r\n  );\r\n}\r\n\r\nheader.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default header;\r\n","import React from \"react\";\r\nimport { Skeleton } from \"antd\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./skeleton.scss\";\r\nexport default function skeleton(props) {\r\n  return (\r\n    <>\r\n      {props.isLoading\r\n        ? [1, 2, 3, 4, 5].map((item, index) => {\r\n            return (\r\n              <section className=\"skeleton\" key={index}>\r\n                <Skeleton avatar={props.isAvatar} active={props.isActive} />\r\n              </section>\r\n            );\r\n          })\r\n        : \"\"}\r\n    </>\r\n  );\r\n}\r\nskeleton.propTypes = {\r\n  isAvatar: PropTypes.bool,\r\n  isActiver: PropTypes.bool,\r\n  isLoading: PropTypes.any,\r\n};\r\n","import React from \"react\";\r\nimport { List, Avatar, Button, Space } from \"antd\";\r\nimport Skeleton from \"../../../components/isLoading/skeleton.jsx\";\r\nimport { Staff } from \"../../../axios\";\r\nimport { message } from \"../../../api\";\r\nimport Header from \"../../../components/Header/header\";\r\nimport \"../NewNotice/NewNotice.scss\";\r\nimport \"./OldNotice.scss\";\r\nconst { getNotice, readNotice, topNotice } = Staff;\r\nexport default class OldNotice extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //数据列表\r\n      listData: [],\r\n      //条数\r\n      total: 0,\r\n      //等待状态\r\n      loading: true,\r\n    };\r\n  }\r\n  //置顶\r\n  handleTop = async (val) => {\r\n    const { listData } = this.state;\r\n    const result = await topNotice(listData[val]._id);\r\n    if (result.code === \"200\") {\r\n      message(\"置顶成功\");\r\n      window.location.reload();\r\n    } else {\r\n      message(result.msg);\r\n    }\r\n  };\r\n  //点击读取\r\n  handleRead = async (val, index) => {\r\n    const { listData } = this.state;\r\n    const result = await readNotice(val._id);\r\n    if (result.code === \"200\") {\r\n      listData[index].status = \"1\";\r\n      message(\"读取成功\", \"success\");\r\n      this.setState({\r\n        listData,\r\n      });\r\n    } else {\r\n      message(result.msg);\r\n    }\r\n  };\r\n  //获取通知\r\n  handleGetNotice = async (pageNum) => {\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    const { listData } = this.state;\r\n    listData.length = 0;\r\n    const result = await getNotice(pageNum);\r\n    this.setState({\r\n      loading: false,\r\n    });\r\n    if (result.data) {\r\n      result.data.forEach((value) => {\r\n        if (Array.isArray(value.resource)) {\r\n          value.resource = value.resource[0];\r\n        }\r\n        listData.push({ ...value, ...value.admin, ...value.notice });\r\n      });\r\n      this.setState({\r\n        listData,\r\n        total: result.pageSize,\r\n      });\r\n    }\r\n  };\r\n  //生命周期\r\n  componentDidMount() {\r\n    this.handleGetNotice(1);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"OldNotice-container\">\r\n        {/* 头部 */}\r\n        <Header title=\"以往通知\"></Header>\r\n        <section className=\"OldNotice-mainer\">\r\n          <List\r\n            locale={{ emptyText: \"暂无通知\" }}\r\n            itemLayout=\"horizontal\"\r\n            size=\"large\"\r\n            // eslint-disable-next-line react/jsx-no-duplicate-props\r\n            locale={{\r\n              emptyText: (\r\n                <Skeleton\r\n                  isLoading={this.state.loading}\r\n                  isActive={true}\r\n                  isAvatar={true}\r\n                ></Skeleton>\r\n              ),\r\n            }}\r\n            pagination={{\r\n              total: this.state.total,\r\n              onChange: (page) => {\r\n                this.handleGetNotice(page);\r\n              },\r\n              pageSize: 5,\r\n            }}\r\n            dataSource={this.state.listData}\r\n            renderItem={(item, index) => (\r\n              <>\r\n                <List.Item key={item._id}>\r\n                  <List.Item.Meta\r\n                    avatar={<Avatar src={item.imgPath} />}\r\n                    title={item.title}\r\n                    description={\r\n                      <Space>\r\n                        {item.name}\r\n                        {item.position}\r\n                        <span style={{ color: \"black\" }}>\r\n                          {item.createTime}\r\n                        </span>\r\n                      </Space>\r\n                    }\r\n                  />\r\n                  {item.content}\r\n                  {item.file && (\r\n                    <section className=\"notice-file\">\r\n                      相关文件地址:\r\n                      <a href={\"/api\" + item.file} download>\r\n                        {item.title}\r\n                      </a>\r\n                    </section>\r\n                  )}\r\n                  <section className=\"btn-container\">\r\n                    <Space style={{ float: \"right\" }}>\r\n                      <Button\r\n                        disabled={item.status === 2}\r\n                        onClick={() => this.handleTop(index)}\r\n                      >\r\n                        {item.status === 2 ? \"已\" : \"\"}置顶\r\n                      </Button>\r\n                      <Button\r\n                        type=\"primary\"\r\n                        disabled={item.status > 0}\r\n                        onClick={() => this.handleRead(item, index)}\r\n                      >\r\n                        {item.status === 0 ? \"未\" : \"已\"}读\r\n                      </Button>\r\n                    </Space>\r\n                  </section>\r\n                </List.Item>\r\n              </>\r\n            )}\r\n          />\r\n          ,\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}