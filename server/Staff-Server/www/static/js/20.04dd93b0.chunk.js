(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[20],{423:function(t,e,a){"use strict";a(0),a(424);var n=a(3);e.a=function(t){return Object(n.jsxs)("section",{className:"staff-header",children:[t.title,t.children]})}},424:function(t,e,a){},910:function(t,e,a){},958:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return w}));var n=a(34),s=a.n(n),c=a(64),i=a(108),r=a(48),l=a(49),u=a(51),o=a(50),d=a(0),h=(a(910),a(423)),f=a(406),p=a(363),j=a(46),b=a(547),O=a(944),x=a(75),D=a(222),v=a(946),k=a(68),m=a(41),y=a(3),C=m.b.getTypes,g=m.b.createList,I=m.b.deleteList,w=function(t){Object(u.a)(a,t);var e=Object(o.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).handleCreate=function(e,a){if(t.state.isInput)Object(k.a)("\u8bf7\u5148\u4fdd\u5b58");else{var n=t.state.listData;n[a].list.push(Object(y.jsxs)(f.b,{children:[Object(y.jsx)(p.a,{ref:function(e){return t.input=e}})," ",Object(y.jsx)(j.a,{size:"middle",type:"primary",onClick:function(){return t.handleRef(e,a)},children:"\u4fdd\u5b58"}),Object(y.jsx)(j.a,{size:"middle",onClick:function(){return t.handleRefCancel(e,a)},children:"\u53d6\u6d88"})]})),t.setState({listData:n,isInput:!0})}},t.handleRefCancel=function(e,a){var n=t.state.listData;e.list.pop(),n[a]=e,t.setState({listData:n,isInput:!1})},t.handleChange=function(e,a,n){t.index=n,e.target.checked?t.checkedData.push(e.target.value):t.checkedData=t.checkedData.filter((function(t){return t!==e.target.value}))},t.handleDelete=function(e,a){if(t.typeId=e._id,t.state.isInput)Object(k.a)("\u8bf7\u5148\u4fdd\u5b58");else{t.data=Object(i.a)(e.list);for(var n=t.state.listData,s=function(n){e.list[n]=Object(y.jsxs)(f.b,{children:[Object(y.jsx)(b.a,{valuePropName:"checked",value:e.list[n],onChange:function(e){return t.handleChange(e,t.data[n],a)}}),e.list[n]]})},c=0;c<e.list.length;c++)s(c);e.list.push(Object(y.jsx)("section",{style:{position:"relative"},children:Object(y.jsxs)(f.b,{style:{position:"absolute",right:0},children:[Object(y.jsx)(j.a,{size:"small",type:"danger",onClick:t.handleComfirmDet,children:"\u5220\u9664"}),Object(y.jsx)(j.a,{size:"small",onClick:function(){return t.handleDetCancel(a)},children:"\u53d6\u6d88"})]})})),n[a]=e,t.setState({listData:n,isInput:!0})}},t.handleDetCancel=function(e){var a=t.state.listData;a[e].list=t.data,t.setState({listData:a,isInput:!1})},t.handleComfirmDet=Object(c.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state.listData,console.log(t.typeId),!t.checkedData.length){e.next=10;break}return e.next=5,I(t.typeId,JSON.stringify(t.checkedData));case 5:n=e.sent,"200"===n.code&&(t.data=t.data.filter((function(e){return!t.checkedData.includes(e)})),a[t.index].list=t.data,t.setState({listData:a,isInput:!1}),Object(k.a)("\u5220\u9664\u6210\u529f","success")),e.next=11;break;case 10:Object(k.a)("\u8bf7\u9009\u62e9\u5220\u9664\u7684\u7c7b\u522b");case 11:case"end":return e.stop()}}),e)}))),t.handleRef=function(){var e=Object(c.a)(s.a.mark((function e(a,n){var c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.input.state.value){e.next=11;break}if(!(c=t.state.listData)[n].list.includes(t.input.state.value)){e.next=5;break}return Object(k.a)("\u8be5\u7c7b\u522b\u5df2\u5b58\u5728"),e.abrupt("return");case 5:return e.next=7,g(a._id,t.input.state.value);case 7:return i=e.sent,"200"===i.code&&(Object(k.a)("\u6dfb\u52a0\u6210\u529f","success"),a.list.pop(),a.list.push(t.input.state.value),c[n]=a,t.setState({listData:c,isInput:!1})),e.abrupt("return");case 11:Object(k.a)("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.state={listData:[],isInput:!1},t.typeId="",t.data=[],t.checkedData=[],t.index=0,t}return Object(l.a)(a,[{key:"handleGetTypes",value:function(){var t=Object(c.a)(s.a.mark((function t(){var e,a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:e=t.sent,a=e.data,n=e.code,console.log(a),"200"===n&&this.setState({listData:a});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.handleGetTypes()}},{key:"render",value:function(){var t=this;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("section",{className:"staff-category",children:[Object(y.jsx)(h.a,{title:"\u7ba1\u7406\u7c7b\u522b"}),Object(y.jsx)("section",{className:"catrgory-main",children:this.state.listData.map((function(e,a){return Object(y.jsx)(O.a,{className:"main-card",title:e.type,extra:Object(y.jsxs)(f.b,{children:[Object(y.jsx)(x.a,{title:"\u6dfb\u52a0\u5b50\u7c7b",children:Object(y.jsx)(D.a,{onClick:function(){return t.handleCreate(e,a)}})}),Object(y.jsx)(x.a,{title:"\u5220\u9664\u5b50\u7c7b",children:Object(y.jsx)(v.a,{onClick:function(){return t.handleDelete(e,a)}})})]}),style:{width:300},children:e.list.map((function(a,n){return Object(y.jsx)("section",{onDoubleClick:function(){return t.handleDelete(e,n)},className:"card-item",children:a},n)}))},e._id)}))})]})})}}]),a}(d.Component)}}]);
//# sourceMappingURL=20.04dd93b0.chunk.js.map