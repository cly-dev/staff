(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[22],{397:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(397);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},902:function(e,t,n){},954:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(28),r=n.n(a),c=n(48),i=n(402),s=n(49),o=n(50),u=n(52),l=n(51),d=n(0),f=n(363),h=n(373),b=n(46),p=n(975),j=n(35),O=n(33),g=(n(902),n(3)),m=f.a.Search,x=j.b.getAllOrder,y=j.b.searchOrder,k=j.b.deleteOrder,v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state=Object(i.a)(Object(i.a)({},a.obj),{},{contont:""}),a.handleChange=function(e){a.props.history.push("/index/changeOrder/".concat(e._id))},a.handleDelete=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.data,e.next=3,k(t._id);case 3:if("200"!==(c=e.sent).code){e.next=12;break}if(a.setState({data:n.filter((function(e){return e._id!==t._id})),total:a.state.total-1}),!(a.state.total>=8)){e.next=9;break}return e.next=9,a.handlePageNum(a.state.current);case 9:Object(O.a)("\u5220\u9664\u6210\u529f","success"),e.next=13;break;case 12:Object(O.a)(c.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSearch=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.search=!0,e.next=3,y(1,t);case 3:"200"===(n=e.sent).code?(Object(O.a)("\u5171\u627e\u5230"+n.pageSize+"\u8bb0\u5f55","success"),n.data.forEach((function(e){e.key=e._id})),a.setState({data:n.data,total:n.pageSize,contont:t,current:1})):Object(O.a)(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleInput=function(){""===a.TableRef.current.state.value&&(a.setState(Object(i.a)({},a.obj)),a.search=!1)},a.handlePageNum=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.search){e.next=6;break}return e.next=3,x(t);case 3:c=e.sent,e.next=9;break;case 6:return e.next=8,y(t,a.state.contont);case 8:c=e.sent;case 9:a.setState({data:c.data,current:t});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.TableRef=Object(d.createRef)(),a.search=!1,a.action=function(e){return Object(g.jsxs)(h.b,{children:[Object(g.jsx)(b.a,{onClick:function(){return a.handleChange(e)},children:"\u4fee\u6539"}),Object(g.jsx)(b.a,{onClick:function(){return a.handleDelete(e)},children:"\u5220\u9664"})]})},a.obj={data:[],total:0,current:1},a.columns=[{title:"\u5546\u54c1\u540d",dataIndex:"name",align:"center",key:"name"},{title:"\u65f6\u95f4",dataIndex:"createTime",align:"center",key:"createTime"},{title:"\u6570\u91cf",dataIndex:"num",align:"center",key:"num"},{title:"\u4ef7\u683c(\u5143)",dataIndex:"price",align:"center",key:"price"},{title:"\u5907\u6ce8",dataIndex:"mark",align:"center",key:"mark"},{title:"\u64cd\u4f5c",align:"center",render:function(e){return a.action(e)},key:"func"}],a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;x(1).then((function(t){e.obj.data=t.data,e.obj.total=t.pageSize,t.data.forEach((function(e){e.key=e._id})),e.setState({data:t.data,total:t.pageSize})}))}},{key:"render",value:function(){return Object(g.jsxs)("section",{className:"search-container",children:[Object(g.jsx)("section",{className:"search-header",children:"\u67e5\u8be2\u9500\u91cf"}),Object(g.jsx)("section",{className:"search-input",children:Object(g.jsx)(m,{size:"large",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0/\u65e5\u671f",ref:this.TableRef,onKeyUp:this.handleInput,onSearch:this.handleSearch,enterButton:!0})}),Object(g.jsx)("section",{className:"search-data",children:Object(g.jsx)(p.a,{pagination:{defaultCurrent:1,defaultPageSize:8,hideOnSinglePage:!0,responsive:!0,total:this.state.total,onChange:this.handlePageNum,current:this.state.current},columns:this.columns,dataSource:this.state.data})})]})}}]),n}(d.Component)}}]);
//# sourceMappingURL=22.91ac39f8.chunk.js.map