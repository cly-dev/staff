{"version":3,"sources":["pages/Staff/ChangeOrder/ChangeOrder.jsx"],"names":["modicOrder","Staff","getOrderDetail","TextArea","Input","ChangeOrder","props","state","timer","initData","handleRef","a","loading","message","formRef","getFieldValue","name","num","price","type","mark","_id","createTime","id","moment","format","data","destroy","code","history","push","msg","handleTime","time","setState","this","match","params","orderId","then","res","setFieldsValue","className","onFinish","ref","from","labelCol","span","wrapperCol","layout","size","Item","label","rules","required","value","placeholder","onChange","min","rows","showCount","maxLength","onClick","submit","Component"],"mappings":"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","file":"static/js/30.8da56417.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport \"./ChangeOrder.scss\";\r\nimport {message} from \"../../../api\";\r\nimport {Staff} from '../../../axios';\r\nimport moment from 'moment';\r\nimport {\r\n    Form,\r\n    Input,\r\n    Button,\r\n    Cascader,\r\n    DatePicker,\r\n    InputNumber,\r\n  } from 'antd';\r\nconst {modicOrder,getOrderDetail} =Staff;\r\nconst { TextArea } = Input;\r\nclass ChangeOrder extends Component {\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    state={\r\n        //时间\r\n        timer:'',\r\n        initData:{}\r\n    }\r\n    handleRef=async()=>{\r\n        const loading=message('正在提交中','loading')\r\n        const{name,num,price,type,mark,_id,createTime}=this.formRef.getFieldValue();\r\n        const data=await modicOrder({id:_id,name,num,price,type,mark,createTime:moment(createTime).format(\"YYYY-MM-DD\")});\r\n        loading.destroy();\r\n        if(data.code==='200'){\r\n           message(\"修改成功\",'success');\r\n           this.props.history.push(\"/index/watchOrder\");        \r\n       }else{\r\n           message(data.msg);\r\n       }\r\n    }\r\n    //时间\r\n    handleTime=(time,timer)=>{\r\n        this.setState({\r\n            timer\r\n        })\r\n    }\r\n    //请求数据\r\n   componentDidMount(){\r\n       getOrderDetail(this.props.match.params.orderId).then(res=>{\r\n        res.data.createTime=moment(res.data.createTime);\r\n        this.formRef.setFieldsValue(res.data);\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <section className=\"changeOrder-container\">\r\n                <section className=\"changeOrder-header\">\r\n                    修改订单\r\n                </section>\r\n                <section className=\"changeOrder-mainer\">\r\n                <Form\r\n                        onFinish={this.handleRef}\r\n                        ref={from=>this.formRef=from}\r\n                        labelCol={{\r\n                            span: 2,\r\n                        }}\r\n                        wrapperCol={{\r\n                            span: 13,\r\n                        }}\r\n                        layout=\"horizontal\"\r\n                        size='large'\r\n                        >\r\n                        <Form.Item\r\n                        label=\"商品名\"  \r\n                        name='name'\r\n                        rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入商品名',\r\n                                },\r\n                ]}>\r\n                    <Input  ref={name=>this.name=name} />\r\n                </Form.Item>\r\n                <Form.Item\r\n                        label=\"类别\"\r\n                        name='type'\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请输入类别',\r\n                            },\r\n                    ]}\r\n                >\r\n                    <Cascader\r\n                        value={this.state.initData.type}\r\n                        placeholder=\"请输入类别\"\r\n                        ref={type=>this.type=type}\r\n                    />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"时间\"  name=\"createTime\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请选择时间',\r\n                            },\r\n                    ]}>\r\n                        <DatePicker  placeholder=\"请输入时间\" onChange={this.handleTime} ref={timer=>this.timer=timer} />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"数量\" name=\"num\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请输入数量',\r\n                            },\r\n                    ]} >\r\n                    <InputNumber min={1} ref={num=>this.num=num} />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"价格\" name=\"price\" rules={[\r\n                        {\r\n                            required: true,\r\n                            message: '请输入价格',\r\n                        },\r\n                    ]}>\r\n                        <InputNumber min={1} ref={price=>this.price=price}/>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"备注\" name='mark'>\r\n                        <TextArea rows={8} showCount maxLength={100} className=\"textArea-input\"></TextArea>\r\n                    </Form.Item>\r\n                    </Form>\r\n                        <section className=\"refs-container\">\r\n                            <Button  size=\"large\" type=\"primary\"  className=\"refs-btn\" onClick={()=>this.formRef.submit()}>提交</Button>\r\n                        </section>\r\n                </section>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nexport default ChangeOrder;\r\n\r\n"],"sourceRoot":""}