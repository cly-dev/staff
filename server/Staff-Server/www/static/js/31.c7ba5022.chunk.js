(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[31],{915:function(t,e,n){},963:function(t,e,n){"use strict";n.r(e);var a=n(28),c=n.n(a),r=n(48),s=n(49),i=n(50),u=n(52),o=n(51),l=n(0),d=n(369),f=n(373),p=n(46),h=n(975),j=n(33),b=n(43),x=n(35),O=(n(915),n(3)),k=x.b.getApplyByPageNum,y=x.b.Repeal,m=x.b.RefMore,v=x.b.DeleteApply,g=x.b.getMarkById,w=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).handleWatchMark=function(){var t=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e._id);case 2:n=t.sent,d.a.info({title:"\u67e5\u770b\u7406\u7531",content:n.data.mark});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleModic=function(){var t=Object(r.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=console,t.next=3,v(e._id);case 3:t.t1=t.sent,t.t0.log.call(t.t0,t.t1),a.props.history.push({pathname:"/index/Apply",state:{info:e}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleDelete=function(){var t=Object(r.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e._id);case 2:"200"===t.sent.code&&(Object(j.a)("\u5220\u9664\u6210\u529f","success"),setTimeout((function(){window.location.reload()}),2e3));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleReal=function(){var t=Object(r.a)(c.a.mark((function t(e){var n,r,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e._id);case 2:n=t.sent,r=a.state.listData,(s=r.find((function(t){return e._id===t._id}))).status="-1",s.statusText="\u5df2\u64a4\u9500","200"===n.code&&(e.status="-1",a.setState({listData:r}),Object(j.a)("\u64a4\u9500\u6210\u529f","success"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleRef=function(){var t=Object(r.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.state.listData,t.next=3,m(e._id);case 3:"200"===(r=t.sent).code?(n.find((function(t){return e._id===t._id})).status="0",a.setState({listData:n}),Object(j.a)("\u63d0\u4ea4\u6210\u529f","success"),Object(b.c)(e)):Object(j.a)(r.msg);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleGetList=function(){var t=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:(n=t.sent).data&&(n.data.forEach((function(t){"0"===t.status?t.statusText="\u5ba1\u6838\u4e2d":"-1"===t.status?t.statusText="\u5df2\u64a4\u9500":"-2"===t.status?t.statusText="\u5df2\u9a73\u56de":"1"===t.status&&(t.statusText="\u5df2\u901a\u8fc7"),t.key=t._id})),a.setState({listData:n.data,total:n.pageSize}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.client="",a.action=function(t){var e="";switch(t.status){case"-1":e=Object(O.jsxs)(f.b,{children:[Object(O.jsx)(p.a,{onClick:function(){return a.handleModic(t)},children:"\u4fee\u6539"}),Object(O.jsx)(p.a,{onClick:function(){return a.handleDelete(t)},type:"danger",children:"\u5220\u9664"}),Object(O.jsx)(p.a,{onClick:function(){return a.handleRef(t)},type:"primary",children:"\u91cd\u65b0\u63d0\u4ea4"})]});break;case"0":e=Object(O.jsxs)(f.b,{children:[Object(O.jsx)(p.a,{onClick:function(){return Object(b.c)(t)},children:"\u50ac\u529e"}),Object(O.jsx)(p.a,{type:"danger",onClick:function(){return a.handleReal(t)},children:"\u64a4\u9500"})]});break;case"1":e=Object(O.jsx)(p.a,{type:"danger",onClick:function(){return a.handleReal(t)},children:"\u64a4\u9500"});break;default:e=Object(O.jsxs)(f.b,{children:[Object(O.jsx)(p.a,{onClick:function(){return a.handleWatchMark(t)},children:"\u67e5\u770b\u7406\u7531"}),Object(O.jsx)(p.a,{onClick:function(){return a.handleDelete(t)},type:"danger",children:"\u5220\u9664"})]})}return e},a.columns=[{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"time",align:"center",key:"createTime"},{title:"\u5929\u6570",dataIndex:"num",align:"center",key:"num"},{title:"\u7c7b\u578b",dataIndex:"type",align:"center",key:"type"},{title:"\u72b6\u6001",align:"center",dataIndex:"statusText",key:"statusText"},{title:"\u64cd\u4f5c",align:"center",render:function(t){return a.action(t)},key:"func"}],a.state={listData:[],total:0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.handleGetList(1),this.client=Object(b.n)((function(t){t&&setTimeout((function(){window.location.reload()}),2e3)}))}},{key:"componentWillUnmount",value:function(){this.client.off()}},{key:"render",value:function(){var t=this;return Object(O.jsxs)("section",{className:"applyList-container",children:[Object(O.jsx)("section",{className:"applyList-header",children:"\u6211\u7684\u7533\u8bf7"}),Object(O.jsx)("section",{className:"applyList-mainer",children:Object(O.jsx)(h.a,{pagination:{defaultCurrent:1,defaultPageSize:6,hideOnSinglePage:!0,responsive:!0,total:this.state.total,onChange:function(e){t.handleGetList(e)}},dataSource:this.state.listData,columns:this.columns})})]})}}]),n}(l.Component);e.default=w}}]);
//# sourceMappingURL=31.c7ba5022.chunk.js.map