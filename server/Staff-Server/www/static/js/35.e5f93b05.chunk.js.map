{"version":3,"sources":["pages/Staff/Apply/apply.jsx"],"names":["TextArea","Input","addApply","Staff","Apply","handleRef","a","data","formRef","getFieldValue","type","result","code","handleApply","message","props","history","push","msg","info","this","location","state","time","moment","status","setFieldsValue","className","onFinish","ref","from","labelCol","span","wrapperCol","layout","initialValues","size","Item","label","name","rules","required","placeholder","options","value","min","rows","showCount","maxLength","onClick","submit","Component"],"mappings":"yVAcQA,EAAaC,IAAbD,SACDE,EAAUC,IAAVD,SACcE,E,4MAEjBC,U,sBAAU,8BAAAC,EAAA,6DACAC,EAAK,EAAKC,QAAQC,iBACnBC,KAAKH,EAAKG,KAAK,GAFd,SAGaR,EAASK,GAHtB,OAIW,SADXI,EAHA,QAIIC,MACNC,YAAYN,GACZO,YAAQ,2DACR,EAAKC,MAAMC,QAAQC,KAAK,qBAExBH,YAAQH,EAAOO,KATb,2C,uDAYV,WACI,IAAMC,EAAKC,KAAKL,MAAMM,SAASC,MAAMF,KAAKL,MAAMM,SAASC,MAAMH,KAAK,GACjEA,IACCA,EAAKI,KAAKC,IAAOL,EAAKI,MACtBJ,EAAKT,KAAK,CAACS,EAAKT,MAChBS,EAAKM,OAAO,IACZL,KAAKZ,QAAQkB,eAAeP,M,oBAGpC,WAAU,IAAD,OACL,OACI,0BAASQ,UAAU,kBAAnB,UACI,yBAASA,UAAU,eAAnB,sCAGA,0BAASA,UAAU,eAAnB,UACA,eAAC,IAAD,CACQC,SAAUR,KAAKf,UACfwB,IAAK,SAAAC,GAAI,OAAE,EAAKtB,QAAQsB,GACxBC,SAAU,CACNC,KAAM,GAEVC,WAAY,CACRD,KAAM,IAEVE,OAAO,aACPC,cAAe,CACXC,KAAK,SAETA,KAAK,QAbb,UAeQ,cAAC,IAAKC,KAAN,CAAWC,MAAM,eACjBC,KAAK,QACLC,MAAO,CACC,CACIC,UAAU,EACV3B,QAAS,mCALrB,SAQJ,cAAC,IAAD,CAAO4B,YAAY,qCAEvB,cAAC,IAAKL,KAAN,CAAWC,MAAM,eACTC,KAAK,OACLC,MAAO,CACH,CACIC,UAAU,EACV3B,QAAS,mCALzB,SASI,cAAC,IAAD,CACI6B,QAAS,CACL,CACIL,MAAM,eACNM,MAAM,gBACR,CACEN,MAAM,eACNM,MAAM,gBACR,CACEN,MAAM,eACNM,MAAM,iBAGdF,YAAY,qCAGhB,cAAC,IAAKL,KAAN,CAAWC,MAAM,2BAAQC,KAAK,OAAOC,MAAO,CACpC,CACIC,UAAU,EACV3B,QAAS,mCAHrB,SAMI,cAAC,IAAD,CAAY4B,YAAY,qCAE5B,cAAC,IAAKL,KAAN,CAAWC,MAAM,eAAKC,KAAK,MAAMC,MAAO,CAChC,CACIC,UAAU,EACV3B,QAAS,mCAHrB,SAMA,cAAC,IAAD,CAAa+B,IAAK,MAElB,cAAC,IAAKR,KAAN,CAAWC,MAAM,eAAKC,KAAK,OAA3B,SACI,cAACvC,EAAD,CAAU8C,KAAM,EAAGC,WAAS,EAACC,UAAW,IAAKrB,UAAU,wBAG3D,yBAASA,UAAU,iBAAnB,SACQ,cAAC,IAAD,CAASS,KAAK,QAAQ1B,KAAK,UAAWiB,UAAU,WAAWsB,QAAS,kBAAI,EAAKzC,QAAQ0C,UAArF,sC,GArGOC","file":"static/js/35.e5f93b05.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport \"./apply.scss\";\r\nimport {message} from \"../../../api\";\r\nimport {Staff} from \"../../../axios\";\r\nimport {Apply as handleApply} from \"../../../socket\";\r\nimport moment from 'moment';\r\nimport {\r\n    Form,\r\n    Input,\r\n    Button,\r\n    Cascader,\r\n    DatePicker,\r\n    InputNumber,\r\n  } from 'antd';\r\nconst { TextArea } = Input;\r\nconst {addApply}=Staff;\r\nexport default class Apply extends Component {\r\n  \r\n    handleRef=async()=>{\r\n        const data=this.formRef.getFieldValue()\r\n        data.type=data.type[0];\r\n        const result=await addApply(data);\r\n        if(result.code==='200'){\r\n            handleApply(data);\r\n            message(\"申请成功,请等待审核\");\r\n            this.props.history.push('/index/applyList');\r\n        }else{\r\n            message(result.msg);\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        const info=this.props.location.state?this.props.location.state.info:'';\r\n        if(info){\r\n            info.time=moment(info.time);\r\n            info.type=[info.type];\r\n            info.status='0';\r\n            this.formRef.setFieldsValue(info)\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <section className=\"apply-container\">\r\n                <section className=\"apply-header\">\r\n                    申请调休\r\n                </section>\r\n                <section className=\"apply-mainer\">\r\n                <Form\r\n                        onFinish={this.handleRef}\r\n                        ref={from=>this.formRef=from}\r\n                        labelCol={{\r\n                            span: 2,\r\n                        }}\r\n                        wrapperCol={{\r\n                            span: 13,\r\n                        }}\r\n                        layout=\"horizontal\"\r\n                        initialValues={{\r\n                            size:'large',\r\n                        }}\r\n                        size='large'\r\n                        >\r\n                        <Form.Item label=\"标题\"  \r\n                        name='title'\r\n                        rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入标题',\r\n                                },\r\n                ]}>\r\n                    <Input placeholder=\"请输入标题\" />\r\n                </Form.Item>\r\n                <Form.Item label=\"类别\"\r\n                        name='type'\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请输入类别',\r\n                            },\r\n                    ]}\r\n                >\r\n                    <Cascader\r\n                        options={[\r\n                            {\r\n                                label:'事假',\r\n                                value:'事假'\r\n                            },{\r\n                                label:'病假',\r\n                                value:'病假',\r\n                            },{\r\n                                label:'其他',\r\n                                value:'其他'\r\n                            }\r\n                        ]}\r\n                        placeholder=\"请输入类别\"\r\n                    />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"开始时间\"  name=\"time\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请选择时间',\r\n                            },\r\n                    ]}>\r\n                        <DatePicker placeholder=\"请输入时间\"/>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"天数\" name=\"num\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请输入天数',\r\n                            },\r\n                    ]} >\r\n                    <InputNumber min={1} />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"理由\" name='desc'>\r\n                        <TextArea rows={8} showCount maxLength={100} className=\"textArea-input\"></TextArea>\r\n                    </Form.Item>\r\n                    </Form>\r\n                    <section className=\"refs-container\">\r\n                            <Button  size=\"large\" type=\"primary\"  className=\"refs-btn\" onClick={()=>this.formRef.submit()}>提交</Button>\r\n                    </section>\r\n                </section>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}