(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[32],{503:function(t,e,a){},925:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return y}));var n=a(33),c=a.n(n),s=a(410),i=a(63),r=a(46),o=a(47),l=a(49),u=a(48),h=a(0),d=a(962),b=a(958),j=a(422),f=a(45),p=(a(503),a(40)),O=a(32),m=a(42),g=a(3),x=p.b.getNoticeByDate,v=p.b.readNotice,y=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))).state={listData:[],total:0},t.handleGetNotice=function(){var e=Object(i.a)(c.a.mark((function e(a){var n,i,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.state.listData).length=0,i=new Date,r="".concat(i.getFullYear(),"\u5e74-").concat(i.getMonth()+1,"\u6708-").concat(i.getDate(),"\u65e5"),e.next=6,x(a,r);case 6:o=e.sent,console.log(o),o.data&&(o.data.forEach((function(t){n.push(Object(s.a)(Object(s.a)(Object(s.a)({},t),t.admin),t.notice))})),t.setState({listData:n,total:o.pageSize}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleRead=function(){var e=Object(i.a)(c.a.mark((function e(a,n){var s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.state.listData,console.log(a),e.next=4,v(a._id);case 4:"200"===(i=e.sent).code?(s[n].status="1",Object(O.a)("\u8bfb\u53d6\u6210\u529f","success"),t.setState({listData:s})):Object(O.a)(i.msg);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.handleGetNotice(1),Object(m.j)((function(t){t&&setTimeout((function(){window.location.reload()}),2e3)}))}},{key:"render",value:function(){var t=this;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.b,{locale:{emptyText:0===this.state.total?"\u6682\u65e0\u4fe1\u606f":""},header:Object(g.jsxs)("h2",{style:{textIndent:20},children:["\u4eca\u65e5\u6709",this.state.total,"\u6761\u6d88\u606f"]}),itemLayout:"horizontal",size:"large",pagination:{onChange:function(e){t.handleGetNotice(e)},total:this.state.total,pageSize:5},dataSource:this.state.listData,renderItem:function(e,a){return Object(g.jsxs)(d.b.Item,{children:[Object(g.jsx)(d.b.Item.Meta,{avatar:Object(g.jsx)(b.a,{src:e.imgPath}),title:e.title,description:Object(g.jsxs)(j.b,{children:[e.name,e.position,Object(g.jsx)("span",{style:{color:"black"},children:e.createTime})]})}),e.content,Object(g.jsx)("section",{className:"btn-container",children:Object(g.jsx)(j.b,{style:{float:"right"},children:Object(g.jsxs)(f.a,{type:"primary",disabled:e.status>0,onClick:function(){return t.handleRead(e,a)},children:[0===e.status?"\u672a":"\u5df2","\u8bfb"]})})})]},e._id)}}),","]})}}]),a}(h.Component)}}]);
//# sourceMappingURL=32.50369fb4.chunk.js.map