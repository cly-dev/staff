(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[17],{397:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},402:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(397);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},516:function(e,t,a){},945:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(7),c=a(1),r=a(2),i=a(4),o=a(9),l=a(0),s=a(6),u=a.n(s),m=a(519),d=a(168),f=a(54),b=a(60),p=a(546),O=a(165),h=a(103),j=a(13),v=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},g=function(e){var t=e.prefixCls,a=e.children,n=e.actions,i=e.extra,o=e.className,s=e.colStyle,m=v(e,["prefixCls","children","actions","extra","className","colStyle"]),d=l.useContext(E),f=d.grid,p=d.itemLayout,O=l.useContext(b.b).getPrefixCls,g=O("list",t),y=n&&n.length>0&&l.createElement("ul",{className:"".concat(g,"-item-action"),key:"actions"},n.map((function(e,t){return l.createElement("li",{key:"".concat(g,"-item-action-").concat(t)},e,t!==n.length-1&&l.createElement("em",{className:"".concat(g,"-item-action-split")}))}))),x=f?"div":"li",w=l.createElement(x,Object(c.a)({},m,{className:u()("".concat(g,"-item"),Object(r.a)({},"".concat(g,"-item-no-flex"),!("vertical"===p?i:!function(){var e;return l.Children.forEach(a,(function(t){"string"===typeof t&&(e=!0)})),e&&l.Children.count(a)>1}())),o)}),"vertical"===p&&i?[l.createElement("div",{className:"".concat(g,"-item-main"),key:"content"},a,y),l.createElement("div",{className:"".concat(g,"-item-extra"),key:"extra"},i)]:[a,y,Object(j.a)(i,{key:"extra"})]);return f?l.createElement(h.a,{flex:1,style:s},w):w};g.Meta=function(e){var t=e.prefixCls,a=e.className,n=e.avatar,r=e.title,i=e.description,o=v(e,["prefixCls","className","avatar","title","description"]),s=(0,l.useContext(b.b).getPrefixCls)("list",t),m=u()("".concat(s,"-item-meta"),a),d=l.createElement("div",{className:"".concat(s,"-item-meta-content")},r&&l.createElement("h4",{className:"".concat(s,"-item-meta-title")},r),i&&l.createElement("div",{className:"".concat(s,"-item-meta-description")},i));return l.createElement("div",Object(c.a)({},o,{className:m}),n&&l.createElement("div",{className:"".concat(s,"-item-meta-avatar")},n),(r||i)&&d)};var y=g,x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},E=l.createContext({});E.Consumer;function w(e){var t,a=e.pagination,s=void 0!==a&&a,h=e.prefixCls,j=e.bordered,v=void 0!==j&&j,g=e.split,y=void 0===g||g,w=e.className,N=e.children,S=e.itemLayout,C=e.loadMore,P=e.grid,k=e.dataSource,z=void 0===k?[]:k,D=e.size,I=e.header,M=e.footer,L=e.loading,T=void 0!==L&&L,G=e.rowKey,F=e.renderItem,J=e.locale,K=x(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),R=s&&"object"===Object(o.a)(s)?s:{},_=l.useState(R.defaultCurrent||1),A=Object(i.a)(_,2),B=A[0],H=A[1],W=l.useState(R.defaultPageSize||10),Y=Object(i.a)(W,2),q=Y[0],Q=Y[1],U=l.useContext(b.b),V=U.getPrefixCls,X=U.renderEmpty,Z=U.direction,$={},ee=function(e){return function(t,a){H(t),Q(a),s&&s[e]&&s[e](t,a)}},te=ee("onChange"),ae=ee("onShowSizeChange"),ne=V("list",h),ce=T;"boolean"===typeof ce&&(ce={spinning:ce});var re=ce&&ce.spinning,ie="";switch(D){case"large":ie="lg";break;case"small":ie="sm"}var oe=u()(ne,(t={},Object(r.a)(t,"".concat(ne,"-vertical"),"vertical"===S),Object(r.a)(t,"".concat(ne,"-").concat(ie),ie),Object(r.a)(t,"".concat(ne,"-split"),y),Object(r.a)(t,"".concat(ne,"-bordered"),v),Object(r.a)(t,"".concat(ne,"-loading"),re),Object(r.a)(t,"".concat(ne,"-grid"),!!P),Object(r.a)(t,"".concat(ne,"-something-after-last-item"),!!(C||s||M)),Object(r.a)(t,"".concat(ne,"-rtl"),"rtl"===Z),t),w),le=Object(c.a)(Object(c.a)(Object(c.a)({},{current:1,total:0}),{total:z.length,current:B,pageSize:q}),s||{}),se=Math.ceil(le.total/le.pageSize);le.current>se&&(le.current=se);var ue=s?l.createElement("div",{className:"".concat(ne,"-pagination")},l.createElement(p.a,Object(c.a)({},le,{onChange:te,onShowSizeChange:ae}))):null,me=Object(n.a)(z);s&&z.length>(le.current-1)*le.pageSize&&(me=Object(n.a)(z).splice((le.current-1)*le.pageSize,le.pageSize));var de=Object(d.a)(),fe=l.useMemo((function(){for(var e=0;e<f.b.length;e+=1){var t=f.b[e];if(de[t])return t}}),[de]),be=l.useMemo((function(){if(P){var e=fe&&P[fe]?P[fe]:P.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===P||void 0===P?void 0:P.column,fe]),pe=re&&l.createElement("div",{style:{minHeight:53}});if(me.length>0){var Oe=me.map((function(e,t){return function(e,t){return F?((a="function"===typeof G?G(e):"string"===typeof G?e[G]:e.key)||(a="list-item-".concat(t)),$[t]=a,F(e,t)):null;var a}(e,t)})),he=l.Children.map(Oe,(function(e,t){return l.createElement("div",{key:$[t],style:be},e)}));pe=P?l.createElement(O.a,{gutter:P.gutter},he):l.createElement("ul",{className:"".concat(ne,"-items")},Oe)}else N||re||(pe=function(e,t){return l.createElement("div",{className:"".concat(e,"-empty-text")},J&&J.emptyText||t("List"))}(ne,X));var je=le.position||"bottom";return l.createElement(E.Provider,{value:{grid:P,itemLayout:S}},l.createElement("div",Object(c.a)({className:oe},K),("top"===je||"both"===je)&&ue,I&&l.createElement("div",{className:"".concat(ne,"-header")},I),l.createElement(m.a,ce,pe,N),M&&l.createElement("div",{className:"".concat(ne,"-footer")},M),C||("bottom"===je||"both"===je)&&ue))}w.Item=y;t.b=w},952:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(28),c=a.n(n),r=a(402),i=a(48),o=a(49),l=a(50),s=a(52),u=a(51),m=a(0),d=a(945),f=a(371),b=a(373),p=a(46),O=(a(516),a(35)),h=a(33),j=a(43),v=a(161),g=a(3),y=O.b.getNoticeByDate,x=O.b.readNotice,E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={listData:[],total:0},e.handleGetNotice=function(){var t=Object(i.a)(c.a.mark((function t(a){var n,i,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.state.listData).length=0,i=new Date,o="".concat(i.getFullYear(),"\u5e74-").concat(i.getMonth()+1,"\u6708-").concat(i.getDate(),"\u65e5"),t.next=6,y(a,o);case 6:(l=t.sent).data&&(l.data.forEach((function(e){n.push(Object(r.a)(Object(r.a)(Object(r.a)({},e),e.admin),e.notice))})),n.length&&v.a.emit("hot",!0),e.setState({listData:n,total:l.pageSize}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRead=function(){var t=Object(i.a)(c.a.mark((function t(a,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.listData,t.next=3,x(a._id);case 3:"200"===(i=t.sent).code?(r[n].status="1",Object(h.a)("\u8bfb\u53d6\u6210\u529f","success"),e.setState({listData:r})):Object(h.a)(i.msg);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.handleGetNotice(1),Object(j.m)((function(e){e&&setTimeout((function(){window.location.reload()}),2e3)}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.b,{locale:{emptyText:0===this.state.total?"\u6682\u65e0\u4fe1\u606f":""},header:Object(g.jsxs)("h2",{style:{textIndent:20},children:["\u4eca\u65e5\u6709",this.state.total,"\u6761\u6d88\u606f"]}),itemLayout:"horizontal",size:"large",pagination:{onChange:function(t){e.handleGetNotice(t)},total:this.state.total,pageSize:5},dataSource:this.state.listData,renderItem:function(t,a){return Object(g.jsxs)(d.b.Item,{className:"list-item",children:[Object(g.jsx)(d.b.Item.Meta,{avatar:Object(g.jsx)(f.a,{src:t.imgPath}),title:t.title,description:Object(g.jsxs)(b.b,{children:[t.name,t.position,Object(g.jsx)("span",{style:{color:"black"},children:t.createTime})]})}),t.content,t.file&&Object(g.jsxs)("section",{className:"notice-file",children:["\u76f8\u5173\u6587\u4ef6\u5730\u5740:",Object(g.jsx)("a",{href:"/api"+t.file,download:!0,children:t.title})]}),Object(g.jsx)("section",{className:"btn-container",children:Object(g.jsx)(b.b,{style:{float:"right"},children:Object(g.jsxs)(p.a,{type:"primary",disabled:t.status>0,onClick:function(){return e.handleRead(t,a)},children:[0===t.status?"\u672a":"\u5df2","\u8bfb"]})})})]},t._id)}}),","]})}}]),a}(m.Component)}}]);
//# sourceMappingURL=17.847bd0b1.chunk.js.map