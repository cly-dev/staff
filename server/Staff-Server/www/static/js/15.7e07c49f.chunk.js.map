{"version":3,"sources":["components/Header/header.jsx","../node_modules/antd/es/popconfirm/index.js","components/Task/task.jsx","pages/Staff/Backlog/backlog.jsx"],"names":["header","props","className","title","children","_this","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Popconfirm","React","ref","_useMergedState","useMergedState","value","visible","defaultValue","defaultVisible","_useMergedState2","_slicedToArray","setVisible","settingVisible","_a","onVisibleChange","onConfirm","onCancel","getPrefixCls","ConfigContext","customizePrefixCls","prefixCls","placement","overlayClassName","restProps","prefixClsConfirm","overlayClassNames","classNames","overlay","LocaleReceiver","componentName","defaultLocale","popconfirmLocale","okButtonProps","cancelButtonProps","cancelText","okText","okType","icon","concat","getRenderPropValue","Button","_extends","onClick","size","convertLegacyProps","renderOverlay","rootPrefixCls","Tooltip","disabled","transitionName","getTransitionName","cloneElement","onKeyDown","_b","keyCode","KeyCode","ESC","_onKeyDown","defaultProps","trigger","ExclamationCircleFilled","applyPost","Staff","task","handleOk","form","submit","handleRef","a","data","_id","code","setState","visiable","apply","message","postpone","num","state","console","log","this","content","url","href","download","Finsh","adminId","type","status","postTime","width","onOk","onFinish","Item","label","name","rules","required","style","max","min","Component","getTaskById","FinshTask","Backlog","handleFinsh","key","list","index","finshTask","username","Store","getState","filter","item","handlePostpone","obj","find","handleScroll","timer","clearTimeout","setTimeout","el","target","loadSuccess","scrollHeight","offsetHeight","scrollTop","pageNum","pgaeNum","total","handleGetTask","push","forEach","val","admin","pageSize","client","postTurn","window","location","reload","off","onScroll","map","src","imgPath","position","tartTime"],"mappings":"iGAAA,uBAiBeA,IAdf,SAAgBC,GACd,OACE,0BAASC,UAAU,eAAnB,UACGD,EAAME,MAENF,EAAMG,c,uDCRb,2IAGIC,OAAQ,EAERC,EAAgC,SAAUC,EAAGC,GAC/C,IAAIC,EAAI,GAER,IAAK,IAAIC,KAAKH,EACRI,OAAOC,UAAUC,eAAeC,KAAKP,EAAGG,IAAMF,EAAEO,QAAQL,GAAK,IAAGD,EAAEC,GAAKH,EAAEG,IAG/E,GAAS,MAALH,GAAqD,oBAAjCI,OAAOK,sBAA2C,KAAIC,EAAI,EAAb,IAAgBP,EAAIC,OAAOK,sBAAsBT,GAAIU,EAAIP,EAAEQ,OAAQD,IAClIT,EAAEO,QAAQL,EAAEO,IAAM,GAAKN,OAAOC,UAAUO,qBAAqBL,KAAKP,EAAGG,EAAEO,MAAKR,EAAEC,EAAEO,IAAMV,EAAEG,EAAEO,KAEhG,OAAOR,GAiBLW,EAA0BC,cAAiB,SAAUpB,EAAOqB,GAC9D,IAAIC,EAAkBC,aAAe,EAAO,CAC1CC,MAAOxB,EAAMyB,QACbC,aAAc1B,EAAM2B,iBAElBC,EAAmBC,YAAeP,EAAiB,GACnDG,EAAUG,EAAiB,GAC3BE,EAAaF,EAAiB,GAE9BG,EAAiB,SAAwBP,EAAOjB,GAClD,IAAIyB,EAEJF,EAAWN,GACsB,QAAhCQ,EAAKhC,EAAMiC,uBAAoC,IAAPD,GAAyBA,EAAGnB,KAAKb,EAAOwB,EAAOjB,IAGtF2B,EAAY,SAAmB3B,GACjC,IAAIyB,EAEJD,GAAe,EAAOxB,GACK,QAA1ByB,EAAKhC,EAAMkC,iBAA8B,IAAPF,GAAyBA,EAAGnB,KAAKT,EAAOG,IAGzE4B,EAAW,SAAkB5B,GAC/B,IAAIyB,EAEJD,GAAe,EAAOxB,GACI,QAAzByB,EAAKhC,EAAMmC,gBAA6B,IAAPH,GAAyBA,EAAGnB,KAAKT,EAAOG,IA8CxE6B,EADoBhB,aAAiBiB,KACJD,aAEjCE,EAAqBtC,EAAMuC,UAC3BC,EAAYxC,EAAMwC,UAClBrC,EAAWH,EAAMG,SACjBsC,EAAmBzC,EAAMyC,iBACzBC,EAAYrC,EAAOL,EAAO,CAAC,YAAa,YAAa,WAAY,qBAEjEuC,EAAYH,EAAa,UAAWE,GACpCK,EAAmBP,EAAa,aAAcE,GAC9CM,EAAoBC,IAAWF,EAAkBF,GACjDK,EAAuB1B,gBAAoB2B,IAAgB,CAC7DC,cAAe,aACfC,cAAeA,IAAc9B,aAC5B,SAAU+B,GACX,OA1CkB,SAAuBX,EAAWW,GACpD,IAAIC,EAAgBnD,EAAMmD,cACtBC,EAAoBpD,EAAMoD,kBAC1BlD,EAAQF,EAAME,MACdmD,EAAarD,EAAMqD,WACnBC,EAAStD,EAAMsD,OACfC,EAASvD,EAAMuD,OACfC,EAAOxD,EAAMwD,KACjB,OAAoBpC,gBAAoB,MAAO,CAC7CnB,UAAW,GAAGwD,OAAOlB,EAAW,mBAClBnB,gBAAoB,MAAO,CACzCnB,UAAW,GAAGwD,OAAOlB,EAAW,aAC/BiB,EAAmBpC,gBAAoB,MAAO,CAC/CnB,UAAW,GAAGwD,OAAOlB,EAAW,mBAC/BmB,YAAmBxD,KAAuBkB,gBAAoB,MAAO,CACtEnB,UAAW,GAAGwD,OAAOlB,EAAW,aAClBnB,gBAAoBuC,IAAQC,YAAS,CACnDC,QAAS1B,EACT2B,KAAM,SACLV,GAAoBC,GAAcH,EAAiBG,YAA0BjC,gBAAoBuC,IAAQC,YAAS,CACnHC,QAAS3B,GACR6B,YAAmBR,GAAS,CAC7BO,KAAM,SACLX,GAAgBG,GAAUJ,EAAiBI,UAmBvCU,CAAczB,EAAWW,MAE9Be,EAAgB7B,IACpB,OAAoBhB,gBAAoB8C,IAASN,YAAS,GAAIlB,EAAW,CACvEH,UAAWA,EACXC,UAAWA,EACXP,gBA1DoB,SAAyBT,GAC9BxB,EAAMmE,UAMrBpC,EAAeP,IAoDfC,QAASA,EACTqB,QAASA,EACTL,iBAAkBG,EAClBvB,IAAKA,EACL+C,eAAgBC,YAAkBJ,EAAe,WAAYjE,EAAMoE,kBACjEE,YAAanE,EAAU,CACzBoE,UAAW,SAAmBhE,GAC5B,IAAIyB,EAAIwC,EAEUpD,iBAAqBjB,KAC0D,QAA9FqE,EAAkB,OAAbrE,QAAkC,IAAbA,OAAsB,GAAU6B,EAAK7B,EAASH,OAAOuE,iBAA8B,IAAPC,GAAyBA,EAAG3D,KAAKmB,EAAIzB,IA3EjI,SAAmBA,GAC9BA,EAAEkE,UAAYC,IAAQC,KAAOlD,GAC/BM,GAAe,EAAOxB,GA4EtBqE,CAAWrE,UAIjBY,EAAW0D,aAAe,CACxBrC,UAAW,MACXsC,QAAS,QACTvB,OAAQ,UACRC,KAAmBpC,gBAAoB2D,IAAyB,MAChEZ,UAAU,GAEGhD,O,+TCxIP6D,EAAcC,IAAdD,UACaE,E,kDACnB,WAAYlF,GAAQ,IAAD,8BACjB,cAAMA,IAURmF,SAAW,WACT,EAAKC,KAAKC,UAZO,EAenBC,UAfmB,uCAeP,WAAO9D,GAAP,eAAA+D,EAAA,sEACaP,EAAU,EAAKhF,MAAMwF,KAAKC,IAAKjE,GAD5C,gBAEG,QAFH,EACFkE,OAEN,EAAKC,SAAS,CACZC,UAAU,IAGZC,YAAM,EAAK7F,MAAMwF,MACjBM,YAAQ,0DAAc,WACtB,EAAK9F,MAAM+F,SAAS,EAAK/F,MAAMwF,KAAKC,IAAKjE,EAAMwE,MATvC,2CAfO,sDAEjB,EAAKC,MAAQ,CACXL,UAAU,GAEZM,QAAQC,IAAInG,GALK,E,0CA2BnB,WAAU,IAAD,OACP,OAEE,cADA,CACA,WAASC,UAAU,eAAnB,UAEE,iDAAUmG,KAAKpG,MAAMwF,KAAKtF,SAE1B,oDACMkG,KAAKpG,MAAMwF,KAAKa,QAAUD,KAAKpG,MAAMwF,KAAKa,QAAU,8BAGzDD,KAAKpG,MAAMwF,KAAKc,KACf,6EAEE,mBAAGC,KAAMH,KAAKpG,MAAMwF,KAAKc,IAAKE,SAAUJ,KAAKpG,MAAME,MAAnD,SACGkG,KAAKpG,MAAMwF,KAAKc,SAKvB,yBAASrG,UAAU,gBAAnB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,MAAM,uCACNmD,WAAW,eACXC,OAAO,eACPpB,UAAW,kBACT,EAAKlC,MAAMyG,MAAM,EAAKzG,MAAMwF,KAAKC,IAAK,EAAKzF,MAAMwF,KAAKkB,UAL1D,SAQE,cAAC,IAAD,CAAQC,KAAK,UAAb,kCAEF,eAAC,IAAD,CACExC,SAAoC,KAA1BiC,KAAKpG,MAAMwF,KAAKoB,OAC1B/C,QAAS,kBAAM,EAAK8B,SAAS,CAAEC,UAAU,KAF3C,UAI8B,MAA3BQ,KAAKpG,MAAMwF,KAAKoB,QAAkB,2BACP,MAA3BR,KAAKpG,MAAMwF,KAAKoB,QAAkB,iCACP,MAA3BR,KAAKpG,MAAMwF,KAAKoB,QAAhB,sBACMR,KAAKpG,MAAMwF,KAAKqB,UACK,MAA3BT,KAAKpG,MAAMwF,KAAKoB,QAAhB,6BAKP,cAAC,IAAD,CACEE,MAAM,UACNrF,QAAS2E,KAAKH,MAAML,SACpB1F,MAAM,+DACNoD,OAAO,eACPD,WAAW,eACXlB,SAAU,kBAAM,EAAKwD,SAAS,CAAEC,UAAU,KAC1CmB,KAAM,kBAAM,EAAK5B,YAPnB,SASE,eAAC,IAAD,CAAM9D,IAAK,SAAC+D,GAAD,OAAW,EAAKA,KAAOA,GAAO4B,SAAUZ,KAAKd,UAAxD,UACE,cAAC,IAAK2B,KAAN,CACEC,MAAM,eACNC,KAAK,OACLC,MAAO,CACL,CACEC,UAAU,EACVvB,QAAS,yCANf,SAUE,cAAC,IAAD,CAAOwB,MAAO,CAAER,MAAO,YAEzB,cAAC,IAAKG,KAAN,CACEC,MAAM,eACNE,MAAO,CACL,CACEC,UAAU,EACVvB,QAAS,yCAGbqB,KAAK,MARP,SAUE,cAAC,IAAD,CACEG,MAAO,CAAER,MAAO,QAChBS,IAAI,IACJC,IAAI,oB,GA5GcC,a,yBCP1BC,EAA2BzC,IAA3ByC,YAAaC,EAAc1C,IAAd0C,UAEAC,E,kDACnB,aAAe,IAAD,8BACZ,gBAgBFC,YAjBc,uCAiBA,WAAOC,EAAKpB,GAAZ,mBAAAnB,EAAA,+DACU,EAAKU,MAArB8B,EADM,EACNA,KAAMC,EADA,EACAA,MADA,SAESL,EAAUG,GAFnB,OAGO,OAHP,OAGDpC,OACTuC,YAAU,CAAEC,SAAUC,IAAMC,SAAN,KAAuBF,SAAUxB,YACvDZ,YAAQ,2DAAe,WACvB,EAAKH,SAAS,CACZoC,KAAMA,EAAKM,QAAO,SAACC,GAAD,OAAUA,EAAK7C,MAAQqC,KACzCE,MAAOA,EAAQ,EAAI,EAAKA,GAAS,EAAK,KAR9B,2CAjBA,0DA8BdO,eA9Bc,uCA8BG,WAAOT,EAAK9B,GAAZ,iBAAAT,EAAA,sDACPwC,EAAS,EAAK9B,MAAd8B,MACFS,EAAMT,EAAKU,MAAK,SAACH,GAAD,OAAUA,EAAK7C,MAAQqC,MACzClB,OAAS,IACb4B,EAAI3B,SAAWb,EACf,EAAKL,SAAS,CAAEoC,SALD,2CA9BH,0DAoDdW,aApDc,uCAoDC,WAAOnI,GAAP,SAAAgF,EAAA,sDACK,MAAd,EAAKoD,OACPC,aAAa,EAAKD,OAEpB,EAAKA,MAAQE,YAAW,WACtB,IAAMC,EAAKvI,EAAEwI,OAEb,GADA7C,QAAQC,IAAR,gBACI,EAAK6C,aACHF,EAAGG,cAAgBH,EAAGI,aAAeJ,EAAGK,WAAa,GAEvD,GADA,EAAKC,SAAW,EACZ,EAAKC,SAAW,EAAKC,MAAO,CAC9B,IAAQvB,EAAS,EAAK9B,MAAd8B,KACAvC,EAAS,EAAK+D,cAAc,EAAKH,SAAjC5D,KACRuC,EAAKyB,KAAKhE,GACV,EAAKG,SAAS,CAAEoC,cAEhBjC,YAAQ,gDAIb,KApBU,2CApDD,sDAGZ,EAAKsD,QAAU,EAEf,EAAKJ,aAAc,EAEnB,EAAKL,MAAQ,KAEb,EAAKW,MAAQ,EACb,EAAKrD,MAAQ,CACX8B,KAAM,GAENC,MAAO,GAbG,E,wFAsCd,WAAoBqB,GAApB,eAAA9D,EAAA,6DACEa,KAAK4C,aAAc,EADrB,SAEqBtB,EAAY2B,GAFjC,UAGoB,SADZ7D,EAFR,QAGWE,KAHX,uBAIIU,KAAK4C,aAAc,EACnBxD,EAAKA,KAAKiE,SAAQ,SAACC,GACjB,IAAK,IAAI5B,KAAO4B,EAAIC,MAClBD,EAAI5B,GAAO4B,EAAIC,MAAM7B,MAP7B,kBAUWtC,GAVX,gD,6HAoCA,4BAAAD,EAAA,sEACqBa,KAAKmD,cAAc,GADxC,OACQ/D,EADR,OAEEY,KAAKkD,MACH9D,EAAKoE,UAAY,EACbpE,EAAKoE,SAAW,EAAKpE,EAAKoE,SAAW,EAAK,EACxC,EACA,EACF,EACNxD,KAAKT,SAAS,CACZoC,KAAMvC,EAAKA,OAGbY,KAAKyD,OAASC,aAAS,SAACtE,GAClBA,GACFqD,YAAW,WACTkB,OAAOC,SAASC,WACf,QAhBT,gD,wFAoBA,WAEE7D,KAAKyD,QAAUzD,KAAKyD,OAAOK,Q,oBAE7B,WAAU,IAAD,OACP,OAEE,cADA,CACA,WAASjK,UAAU,gBAAnB,UAEE,cAAC,IAAD,CAAQC,MAAM,6BAGd,yBAASD,UAAU,eAAnB,SACGmG,KAAKH,MAAM8B,KAAK9G,OACf,qCACE,yBAAShB,UAAU,gBAAgBkK,SAAU/D,KAAKsC,aAAlD,SACGtC,KAAKH,MAAM8B,KAAKqC,KAAI,SAAC9B,EAAMN,GAC1B,OACE,0BACE/H,UAAU,aAEV4D,QAAS,kBAAM,EAAK8B,SAAS,CAAEqC,WAHjC,UAME,cAAC,IAAD,CACE/H,UAAU,cACVoK,IAAK/B,EAAKgC,UAGZ,0BAASrK,UAAU,YAAnB,UACE,0BAASA,UAAU,YAAnB,UACE,iCACGqI,EAAKnB,KADR,IACemB,EAAKiC,YAEpB,kCAAKjC,EAAKkC,eAGZ,yBAASvK,UAAU,eAAnB,SAAmCqI,EAAKpI,aAjBrC8H,QAwBb,yBAAS/H,UAAU,kBAAnB,SACE,cAAC,EAAD,CACE8F,SAAUK,KAAKmC,eACf9B,MAAOL,KAAKyB,YACZrC,KACEY,KAAKH,MAAM8B,KAAK9G,OACZmF,KAAKH,MAAM8B,KAAK3B,KAAKH,MAAM+B,OAC3B,kCAMZ,yBAAS/H,UAAU,eAAnB,SACE,uE,GAzJuBwH","file":"static/js/15.7e07c49f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./header.scss\";\r\nfunction header(props) {\r\n  return (\r\n    <section className=\"staff-header\">\r\n      {props.title}\r\n\r\n      {props.children}\r\n    </section>\r\n  );\r\n}\r\n\r\nheader.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default header;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this;\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport Tooltip from '../tooltip';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale/default';\nimport { ConfigContext } from '../config-provider';\nimport { getRenderPropValue } from '../_util/getRenderPropValue';\nimport { cloneElement } from '../_util/reactNode';\nimport { getTransitionName } from '../_util/motion';\nvar Popconfirm = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useMergedState = useMergedState(false, {\n    value: props.visible,\n    defaultValue: props.defaultVisible\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var settingVisible = function settingVisible(value, e) {\n    var _a;\n\n    setVisible(value);\n    (_a = props.onVisibleChange) === null || _a === void 0 ? void 0 : _a.call(props, value, e);\n  };\n\n  var onConfirm = function onConfirm(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var onCancel = function onCancel(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var _onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === KeyCode.ESC && visible) {\n      settingVisible(false, e);\n    }\n  };\n\n  var onVisibleChange = function onVisibleChange(value) {\n    var disabled = props.disabled;\n\n    if (disabled) {\n      return;\n    }\n\n    settingVisible(value);\n  };\n\n  var renderOverlay = function renderOverlay(prefixCls, popconfirmLocale) {\n    var okButtonProps = props.okButtonProps,\n        cancelButtonProps = props.cancelButtonProps,\n        title = props.title,\n        cancelText = props.cancelText,\n        okText = props.okText,\n        okType = props.okType,\n        icon = props.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-inner-content\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, icon, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message-title\")\n    }, getRenderPropValue(title))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-buttons\")\n    }, /*#__PURE__*/React.createElement(Button, _extends({\n      onClick: onCancel,\n      size: \"small\"\n    }, cancelButtonProps), cancelText || popconfirmLocale.cancelText), /*#__PURE__*/React.createElement(Button, _extends({\n      onClick: onConfirm\n    }, convertLegacyProps(okType), {\n      size: \"small\"\n    }, okButtonProps), okText || popconfirmLocale.okText)));\n  };\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var customizePrefixCls = props.prefixCls,\n      placement = props.placement,\n      children = props.children,\n      overlayClassName = props.overlayClassName,\n      restProps = __rest(props, [\"prefixCls\", \"placement\", \"children\", \"overlayClassName\"]);\n\n  var prefixCls = getPrefixCls('popover', customizePrefixCls);\n  var prefixClsConfirm = getPrefixCls('popconfirm', customizePrefixCls);\n  var overlayClassNames = classNames(prefixClsConfirm, overlayClassName);\n  var overlay = /*#__PURE__*/React.createElement(LocaleReceiver, {\n    componentName: \"Popconfirm\",\n    defaultLocale: defaultLocale.Popconfirm\n  }, function (popconfirmLocale) {\n    return renderOverlay(prefixCls, popconfirmLocale);\n  });\n  var rootPrefixCls = getPrefixCls();\n  return /*#__PURE__*/React.createElement(Tooltip, _extends({}, restProps, {\n    prefixCls: prefixCls,\n    placement: placement,\n    onVisibleChange: onVisibleChange,\n    visible: visible,\n    overlay: overlay,\n    overlayClassName: overlayClassNames,\n    ref: ref,\n    transitionName: getTransitionName(rootPrefixCls, 'zoom-big', props.transitionName)\n  }), cloneElement(children, {\n    onKeyDown: function onKeyDown(e) {\n      var _a, _b;\n\n      if ( /*#__PURE__*/React.isValidElement(children)) {\n        (_b = children === null || children === void 0 ? void 0 : (_a = children.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      }\n\n      _onKeyDown(e);\n    }\n  }));\n});\nPopconfirm.defaultProps = {\n  placement: 'top',\n  trigger: 'click',\n  okType: 'primary',\n  icon: /*#__PURE__*/React.createElement(ExclamationCircleFilled, null),\n  disabled: false\n};\nexport default Popconfirm;","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./task.scss\";\r\nimport {\r\n  Button,\r\n  Space,\r\n  Popconfirm,\r\n  Modal,\r\n  InputNumber,\r\n  Form,\r\n  Input,\r\n} from \"antd\";\r\nimport { message } from \"../../api\";\r\nimport { Staff } from \"../../axios\";\r\nimport { applyPost as apply } from \"../../socket\";\r\nconst { applyPost } = Staff;\r\nexport default class task extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      visiable: false,\r\n    };\r\n    console.log(props);\r\n  }\r\n  static propTypes = {\r\n    data: PropTypes.any.isRequired,\r\n  };\r\n  //点击申请延期事件\r\n  handleOk = () => {\r\n    this.form.submit();\r\n  };\r\n  //校验通过\r\n  handleRef = async (value) => {\r\n    const { code } = await applyPost(this.props.data._id, value);\r\n    if (code === \"200\") {\r\n      this.setState({\r\n        visiable: false,\r\n      });\r\n      //发送信息\r\n      apply(this.props.data);\r\n      message(\"申请成功,请等待审核\", \"success\");\r\n      this.props.postpone(this.props.data._id, value.num);\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      //显示任务正文组件\r\n      <section className=\"backlog-task\">\r\n        {/* 标题 */}\r\n        <span>标题:{this.props.data.title}</span>\r\n        {/* 正文 */}\r\n        <article>\r\n          内容:{this.props.data.content ? this.props.data.content : \"暂无内容\"}\r\n        </article>\r\n        {/* 相关文件链接 */}\r\n        {this.props.data.url && (\r\n          <>\r\n            相关文件地址:\r\n            <a href={this.props.data.url} download={this.props.title}>\r\n              {this.props.data.url}\r\n            </a>\r\n          </>\r\n        )}\r\n        {/* 回馈 */}\r\n        <section className=\"task-feedback\">\r\n          <Space>\r\n            <Popconfirm\r\n              title=\"确认完成任务\"\r\n              cancelText=\"稍等\"\r\n              okText=\"完成\"\r\n              onConfirm={() =>\r\n                this.props.Finsh(this.props.data._id, this.props.data.adminId)\r\n              }\r\n            >\r\n              <Button type=\"primary\">已完成</Button>\r\n            </Popconfirm>\r\n            <Button\r\n              disabled={this.props.data.status != \"0\" ? true : false}\r\n              onClick={() => this.setState({ visiable: true })}\r\n            >\r\n              {this.props.data.status === \"0\" && \"申请延期\"}\r\n              {this.props.data.status === \"2\" && \"正在审核中\"}\r\n              {this.props.data.status === \"3\" &&\r\n                `延期${this.props.data.postTime}`}\r\n              {this.props.data.status === \"4\" && `未通过`}\r\n            </Button>\r\n          </Space>\r\n        </section>\r\n        {/* 申请延期弹出框 */}\r\n        <Modal\r\n          width=\"12.5rem\"\r\n          visible={this.state.visiable}\r\n          title=\"请输入延迟天数和理由\"\r\n          okText=\"确定\"\r\n          cancelText=\"取消\"\r\n          onCancel={() => this.setState({ visiable: false })}\r\n          onOk={() => this.handleOk()}\r\n        >\r\n          <Form ref={(form) => (this.form = form)} onFinish={this.handleRef}>\r\n            <Form.Item\r\n              label=\"理由\"\r\n              name=\"mask\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"天数不能为空\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input style={{ width: \"100%\" }}></Input>\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"天数\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"天数不能为空\",\r\n                },\r\n              ]}\r\n              name=\"num\"\r\n            >\r\n              <InputNumber\r\n                style={{ width: \"100%\" }}\r\n                max=\"7\"\r\n                min=\"0\"\r\n              ></InputNumber>\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Avatar } from \"antd\";\r\nimport \"./backlog.scss\";\r\nimport Task from \"../../../components/Task/task\";\r\nimport Header from \"../../../components/Header/header\";\r\nimport { Staff } from \"../../../axios\";\r\nimport message from \"../../../api/message\";\r\nimport { postTurn, finshTask } from \"../../../socket\";\r\nimport Store from \"../../../redux/store\";\r\nconst { getTaskById, FinshTask } = Staff;\r\n//TODO --还未完成\r\nexport default class Backlog extends Component {\r\n  constructor() {\r\n    super();\r\n    //当前页面\r\n    this.pageNum = 1;\r\n    //是否加载成功标识\r\n    this.loadSuccess = false;\r\n    //节流\r\n    this.timer = null;\r\n    //总页数\r\n    this.total = 0;\r\n    this.state = {\r\n      list: [],\r\n      //当前任务列表\r\n      index: 0,\r\n    };\r\n  }\r\n  //点击完成事件\r\n  handleFinsh = async (key, adminId) => {\r\n    let { list, index } = this.state;\r\n    const result = await FinshTask(key);\r\n    if (result.code == \"200\") {\r\n      finshTask({ username: Store.getState[\"user\"].username, adminId });\r\n      message(\"棒(๑•̀ㅂ•́)و✧\", \"success\");\r\n      this.setState({\r\n        list: list.filter((item) => item._id !== key),\r\n        index: index - 1 > 0 ? (index -= 1) : 0,\r\n      });\r\n    }\r\n  };\r\n  //延期\r\n  handlePostpone = async (key, num) => {\r\n    const { list } = this.state;\r\n    const obj = list.find((item) => item._id === key);\r\n    obj.status = \"2\";\r\n    obj.postTime = num;\r\n    this.setState({ list });\r\n  };\r\n  //获取任务\r\n  async handleGetTask(pgaeNum) {\r\n    this.loadSuccess = false;\r\n    const data = await getTaskById(pgaeNum);\r\n    if (data.code === \"200\") {\r\n      this.loadSuccess = true;\r\n      data.data.forEach((val) => {\r\n        for (let key in val.admin) {\r\n          val[key] = val.admin[key];\r\n        }\r\n      });\r\n      return data;\r\n    }\r\n  }\r\n  //滑动\r\n  handleScroll = async (e) => {\r\n    if (this.timer != null) {\r\n      clearTimeout(this.timer);\r\n    }\r\n    this.timer = setTimeout(() => {\r\n      const el = e.target;\r\n      console.log(this);\r\n      if (this.loadSuccess) {\r\n        if (el.scrollHeight - (el.offsetHeight + el.scrollTop) < 10) {\r\n          this.pageNum += 1;\r\n          if (this.pgaeNum <= this.total) {\r\n            const { list } = this.state;\r\n            const { data } = this.handleGetTask(this.pageNum);\r\n            list.push(data);\r\n            this.setState({ list });\r\n          } else {\r\n            message(\"没有更多任务啦\");\r\n          }\r\n        }\r\n      }\r\n    }, 500);\r\n  };\r\n  async componentDidMount() {\r\n    const data = await this.handleGetTask(1);\r\n    this.total =\r\n      data.pageSize <= 8\r\n        ? data.pageSize / 8 + (data.pageSize % 8) > 0\r\n          ? 1\r\n          : 0\r\n        : 1;\r\n    this.setState({\r\n      list: data.data,\r\n    });\r\n    //获取申请回执\r\n    this.client = postTurn((data) => {\r\n      if (data) {\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      }\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    //解绑\r\n    this.client && this.client.off();\r\n  }\r\n  render() {\r\n    return (\r\n      // 待办\r\n      <section className=\"staff-backlog\">\r\n        {/* 头部 */}\r\n        <Header title=\"我的待办\"></Header>\r\n\r\n        {/* 待办主体 */}\r\n        <section className=\"backLog-main\">\r\n          {this.state.list.length ? (\r\n            <>\r\n              <section className=\"backLog-aside\" onScroll={this.handleScroll}>\r\n                {this.state.list.map((item, index) => {\r\n                  return (\r\n                    <section\r\n                      className=\"aside-item\"\r\n                      key={index}\r\n                      onClick={() => this.setState({ index })}\r\n                    >\r\n                      {/* 头像 */}\r\n                      <Avatar\r\n                        className=\"item-avatar\"\r\n                        src={item.imgPath}\r\n                      ></Avatar>\r\n                      {/* 任务信息 */}\r\n                      <section className=\"item-info\">\r\n                        <section className=\"info-name\">\r\n                          <span>\r\n                            {item.name}-{item.position}\r\n                          </span>\r\n                          <i> {item.tartTime}</i>\r\n                        </section>\r\n                        {/* 内容 */}\r\n                        <section className=\"info-content\">{item.title}</section>\r\n                      </section>\r\n                    </section>\r\n                  );\r\n                })}\r\n              </section>\r\n              {/*主体*/}\r\n              <section className=\"backLog-content\">\r\n                <Task\r\n                  postpone={this.handlePostpone}\r\n                  Finsh={this.handleFinsh}\r\n                  data={\r\n                    this.state.list.length\r\n                      ? this.state.list[this.state.index]\r\n                      : \"暂无任务\"\r\n                  }\r\n                ></Task>\r\n              </section>\r\n            </>\r\n          ) : (\r\n            <section className=\"backlog-null\">\r\n              <span>暂无任务</span>\r\n            </section>\r\n          )}\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}