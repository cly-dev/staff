{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/antd/es/popconfirm/index.js","pages/Admin/ApplyList/applyList.jsx"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_this","__rest","s","e","t","p","prototype","hasOwnProperty","call","indexOf","propertyIsEnumerable","Popconfirm","React","props","ref","_useMergedState","useMergedState","visible","defaultValue","defaultVisible","_useMergedState2","_slicedToArray","setVisible","settingVisible","_a","onVisibleChange","onConfirm","onCancel","getPrefixCls","ConfigContext","customizePrefixCls","prefixCls","placement","children","overlayClassName","restProps","prefixClsConfirm","overlayClassNames","classNames","overlay","LocaleReceiver","componentName","defaultLocale","popconfirmLocale","okButtonProps","cancelButtonProps","title","cancelText","okText","okType","icon","className","concat","getRenderPropValue","Button","_extends","onClick","size","convertLegacyProps","renderOverlay","rootPrefixCls","Tooltip","disabled","transitionName","getTransitionName","cloneElement","onKeyDown","_b","keyCode","KeyCode","ESC","_onKeyDown","defaultProps","trigger","ExclamationCircleFilled","getAllApply","Admin","applyPass","applyTurn","ApplyList","useState","isModalVisible","setIsModalVisible","dataList","setData","total","setTotal","applyId","setApplyId","userId","setUserId","dataRef","useRef","userIdRef","current","input","columns","dataIndex","render","record","text","status","Dismissal","val","console","log","_id","type","handlePass","a","state","code","message","handleLocalChange","Audit","align","data","msg","id","find","index","arr","useEffect","handleGetDataByPage","clint","receptionApply","setTimeout","window","location","reload","off","page","staff","pageSize","pagination","onChange","dataSource","onOk","placeholder"],"mappings":"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","file":"static/js/23.c8306e93.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this;\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport Tooltip from '../tooltip';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale/default';\nimport { ConfigContext } from '../config-provider';\nimport { getRenderPropValue } from '../_util/getRenderPropValue';\nimport { cloneElement } from '../_util/reactNode';\nimport { getTransitionName } from '../_util/motion';\nvar Popconfirm = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useMergedState = useMergedState(false, {\n    value: props.visible,\n    defaultValue: props.defaultVisible\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var settingVisible = function settingVisible(value, e) {\n    var _a;\n\n    setVisible(value);\n    (_a = props.onVisibleChange) === null || _a === void 0 ? void 0 : _a.call(props, value, e);\n  };\n\n  var onConfirm = function onConfirm(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var onCancel = function onCancel(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var _onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === KeyCode.ESC && visible) {\n      settingVisible(false, e);\n    }\n  };\n\n  var onVisibleChange = function onVisibleChange(value) {\n    var disabled = props.disabled;\n\n    if (disabled) {\n      return;\n    }\n\n    settingVisible(value);\n  };\n\n  var renderOverlay = function renderOverlay(prefixCls, popconfirmLocale) {\n    var okButtonProps = props.okButtonProps,\n        cancelButtonProps = props.cancelButtonProps,\n        title = props.title,\n        cancelText = props.cancelText,\n        okText = props.okText,\n        okType = props.okType,\n        icon = props.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-inner-content\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, icon, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message-title\")\n    }, getRenderPropValue(title))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-buttons\")\n    }, /*#__PURE__*/React.createElement(Button, _extends({\n      onClick: onCancel,\n      size: \"small\"\n    }, cancelButtonProps), cancelText || popconfirmLocale.cancelText), /*#__PURE__*/React.createElement(Button, _extends({\n      onClick: onConfirm\n    }, convertLegacyProps(okType), {\n      size: \"small\"\n    }, okButtonProps), okText || popconfirmLocale.okText)));\n  };\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var customizePrefixCls = props.prefixCls,\n      placement = props.placement,\n      children = props.children,\n      overlayClassName = props.overlayClassName,\n      restProps = __rest(props, [\"prefixCls\", \"placement\", \"children\", \"overlayClassName\"]);\n\n  var prefixCls = getPrefixCls('popover', customizePrefixCls);\n  var prefixClsConfirm = getPrefixCls('popconfirm', customizePrefixCls);\n  var overlayClassNames = classNames(prefixClsConfirm, overlayClassName);\n  var overlay = /*#__PURE__*/React.createElement(LocaleReceiver, {\n    componentName: \"Popconfirm\",\n    defaultLocale: defaultLocale.Popconfirm\n  }, function (popconfirmLocale) {\n    return renderOverlay(prefixCls, popconfirmLocale);\n  });\n  var rootPrefixCls = getPrefixCls();\n  return /*#__PURE__*/React.createElement(Tooltip, _extends({}, restProps, {\n    prefixCls: prefixCls,\n    placement: placement,\n    onVisibleChange: onVisibleChange,\n    visible: visible,\n    overlay: overlay,\n    overlayClassName: overlayClassNames,\n    ref: ref,\n    transitionName: getTransitionName(rootPrefixCls, 'zoom-big', props.transitionName)\n  }), cloneElement(children, {\n    onKeyDown: function onKeyDown(e) {\n      var _a, _b;\n\n      if ( /*#__PURE__*/React.isValidElement(children)) {\n        (_b = children === null || children === void 0 ? void 0 : (_a = children.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      }\n\n      _onKeyDown(e);\n    }\n  }));\n});\nPopconfirm.defaultProps = {\n  placement: 'top',\n  trigger: 'click',\n  okType: 'primary',\n  icon: /*#__PURE__*/React.createElement(ExclamationCircleFilled, null),\n  disabled: false\n};\nexport default Popconfirm;","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Table, Popconfirm, Button, Space, Modal, Input } from \"antd\";\r\nimport { Admin } from \"../../../axios\";\r\nimport { message } from \"../../../api\";\r\nimport { Audit, receptionApply } from \"../../../socket\";\r\nconst { getAllApply, applyPass, applyTurn } = Admin;\r\nexport default function ApplyList() {\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [dataList, setData] = new useState([]);\r\n  const [total, setTotal] = new useState(0);\r\n  const [applyId, setApplyId] = new useState(\"\");\r\n  const [userId, setUserId] = new useState(\"\");\r\n  const dataRef = useRef();\r\n  const userIdRef = useRef();\r\n  userIdRef.current = userId;\r\n  const input = useRef();\r\n  dataRef.current = dataList;\r\n  const columns = [\r\n    { title: \"姓名\", dataIndex: \"username\", key: \"username\" },\r\n    { title: \"标题\", dataIndex: \"title\", key: \"title\" },\r\n    { title: \"时间\", dataIndex: \"time\", key: \"time\" },\r\n    { title: \"天数\", dataIndex: \"num\", key: \"num\" },\r\n    { title: \"内容\", dataIndex: \"desc\", key: \"desc\" },\r\n    { title: \"类型\", dataIndex: \"type\", key: \"type\" },\r\n    {\r\n      title: \"状态\",\r\n      key: \"status\",\r\n      render: (record) => {\r\n        let text = \"\";\r\n        switch (record.status) {\r\n          case \"0\":\r\n            text = \"审核中\";\r\n            break;\r\n          case \"1\":\r\n            text = \"已通过\";\r\n            break;\r\n          case \"-1\":\r\n            text = \"已撤销\";\r\n            break;\r\n          case \"-2\":\r\n            text = \"已驳回\";\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        return text;\r\n      },\r\n    },\r\n    {\r\n      title: \"操作\",\r\n      dataIndex: \"\",\r\n      key: \"x\",\r\n      render: (text) => {\r\n        let El = \"\";\r\n        const Dismissal = () => (\r\n          <Popconfirm\r\n            cancelText=\"取消\"\r\n            okText=\"确定\"\r\n            onConfirm={() => handleDelete(text)}\r\n            title=\"是否驳回\"\r\n          >\r\n            <Button type=\"danger\">驳回</Button>\r\n          </Popconfirm>\r\n        );\r\n        if (text.status === \"0\") {\r\n          El = (\r\n            <Space>\r\n              <Button type=\"primary\" onClick={() => handlePass(text)}>\r\n                通过\r\n              </Button>\r\n              <Dismissal></Dismissal>\r\n            </Space>\r\n          );\r\n        } else if (text.status === \"1\") {\r\n          El = <Dismissal></Dismissal>;\r\n        } else {\r\n          El = \"无法操作\";\r\n        }\r\n        return El;\r\n      },\r\n    },\r\n  ];\r\n  columns.forEach((value) => {\r\n    value.align = \"center\";\r\n  });\r\n\r\n  //点击驳回事件\r\n  function handleDelete(val) {\r\n    console.log(val);\r\n    setUserId(val.userId);\r\n    setApplyId(val._id);\r\n    setIsModalVisible(true);\r\n  }\r\n  //确认驳回事件\r\n  async function handleTurn() {\r\n    if (input.current.state.value) {\r\n      const data = await applyTurn(applyId, input.current.state.value);\r\n      if (data.code === \"200\") {\r\n        message(\"驳回成功\", \"success\");\r\n        handleLocalChange(applyId, \"-2\");\r\n        setIsModalVisible(false);\r\n        input.current.state.value = \"\";\r\n        Audit({\r\n          type: \"turn\",\r\n          message: \"您的一条申请消息被驳回\",\r\n          userId: userIdRef.current,\r\n          applyId,\r\n        });\r\n      }\r\n    } else {\r\n      message(\"请输入驳回理由\");\r\n    }\r\n  }\r\n  //通过申请\r\n  const handlePass = async (text) => {\r\n    const data = await applyPass(text._id);\r\n    if (data.code === \"200\") {\r\n      message(\"申请通过\", \"success\");\r\n      handleLocalChange(text._id, \"1\");\r\n      Audit({\r\n        type: \"pass\",\r\n        message: \"您的一条申请消息通过\",\r\n        userId: text.userId,\r\n        applyId,\r\n      });\r\n    } else {\r\n      message(data.msg);\r\n    }\r\n  };\r\n\r\n  //改变本地数据的状态\r\n  const handleLocalChange = (id, status) => {\r\n    let obj = dataList.find((value) => value._id === id);\r\n    obj.status = status;\r\n    let index = 0;\r\n    for (let i = 0; i < dataList.length; i++) {\r\n      if (dataList[i]._id === id) {\r\n        index = i;\r\n      }\r\n    }\r\n    let arr = [...dataList];\r\n    arr[index].status = status;\r\n    setData(arr);\r\n  };\r\n  //生命周期\r\n  new useEffect(() => {\r\n    handleGetDataByPage(1);\r\n    //websocket即时获取申请信息\r\n    const clint = receptionApply((data) => {\r\n      if (data) {\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      }\r\n    });\r\n    return () => {\r\n      clint.off();\r\n    };\r\n  }, [dataRef]);\r\n  //根据页码获取数据\r\n  const handleGetDataByPage = async (page) => {\r\n    let arr = [];\r\n    const data = await getAllApply(page);\r\n    console.log(data);\r\n    if (data.data) {\r\n      data.data.forEach((value) => {\r\n        value.key = value._id;\r\n        arr.push({ ...value, ...value.staff });\r\n      });\r\n      setData(arr);\r\n      setTotal(data.pageSize);\r\n    }\r\n  };\r\n  return (\r\n    <section>\r\n      <Table\r\n        pagination={{\r\n          total,\r\n          pageSize: 10,\r\n          onChange: (page) => {\r\n            handleGetDataByPage(page);\r\n          },\r\n        }}\r\n        columns={columns}\r\n        dataSource={dataList}\r\n      ></Table>\r\n      <Modal\r\n        title=\"请输入驳回原因\"\r\n        visible={isModalVisible}\r\n        okText=\"确定\"\r\n        cancelText=\"取消\"\r\n        onCancel={() => setIsModalVisible(false)}\r\n        onOk={handleTurn}\r\n      >\r\n        <Input placeholder=\"请输入原因\" ref={input}></Input>\r\n      </Modal>\r\n    </section>\r\n  );\r\n}\r\n"],"sourceRoot":""}