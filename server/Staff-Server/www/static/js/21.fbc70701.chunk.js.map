{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","../node_modules/@ant-design/icons/es/icons/UploadOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/CheckSquareOutlined.js","../node_modules/@ant-design/icons/es/icons/CheckSquareOutlined.js","components/Progress/progress.jsx","pages/Admin/AddNotice/addNotice.jsx"],"names":["DeleteOutlined","props","ref","React","AntdIcon","Object","assign","icon","DeleteOutlinedSvg","displayName","UploadOutlined","UploadOutlinedSvg","CheckSquareOutlined","CheckSquareOutlinedSvg","uploadFile","Admin","deleteFile","Progress","useState","path","setPath","pathName","setPathName","progress","setPrpgress","loading","setLoading","succeed","setSucceed","e","a","formData","FormData","append","target","files","name","url","loaded","total","data","code","message","clear","className","type","onChange","LoadingOutlined","style","color","max","value","onClick","addNotice","TextArea","Input","AddNotice","handleRef","formRef","getFieldValue","title","content","file","filePath","result","destroy","Notice","history","push","msg","getPath","state","timer","fileName","onFinish","this","from","labelCol","span","wrapperCol","layout","initialValues","size","Item","label","rules","required","rows","showCount","maxLength","submit","Component"],"mappings":"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","file":"static/js/21.fbc70701.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: UploadOutlinedSvg\n  }));\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nexport default /*#__PURE__*/React.forwardRef(UploadOutlined);","// This icon file is generated automatically.\nvar CheckSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"check-square\", \"theme\": \"outlined\" };\nexport default CheckSquareOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckSquareOutlinedSvg from \"@ant-design/icons-svg/es/asn/CheckSquareOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CheckSquareOutlined = function CheckSquareOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: CheckSquareOutlinedSvg\n  }));\n};\n\nCheckSquareOutlined.displayName = 'CheckSquareOutlined';\nexport default /*#__PURE__*/React.forwardRef(CheckSquareOutlined);","import React, { useState } from \"react\";\r\nimport {\r\n  CheckSquareOutlined,\r\n  DeleteOutlined,\r\n  LoadingOutlined,\r\n  UploadOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Admin } from \"../../axios\";\r\nimport { Button } from \"antd\";\r\nimport \"./progress.scss\";\r\nimport { message } from \"../../api\";\r\nconst { uploadFile, deleteFile } = Admin;\r\nexport default function Progress(props) {\r\n  //文件路径\r\n  const [path, setPath] = useState(\"\");\r\n  //文件名\r\n  const [pathName, setPathName] = useState(\"\");\r\n  //传输进度\r\n  const [progress, setPrpgress] = useState(0);\r\n  //上传loading\r\n  const [loading, setLoading] = useState(false);\r\n  //上传成功\r\n  const [succeed, setSucceed] = useState(false);\r\n  //上传事件\r\n  async function handleUpload(e) {\r\n    //上传文件\r\n    const formData = new FormData();\r\n    //获取文件\r\n    formData.append(\"file\", e.target.files[0]);\r\n    setLoading(true);\r\n    setPrpgress(0);\r\n    setPathName(e.target.files[0].name);\r\n    const data = await uploadFile(\r\n      props.url,\r\n      formData,\r\n      (e) => {\r\n        setPrpgress((e.loaded / e.total) * 100);\r\n      },\r\n      {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      }\r\n    );\r\n    if (data.code === \"200\") {\r\n      //向父组件传递\r\n      props.path(data.data);\r\n      setPath(data.data);\r\n      message(\"上传成功\", \"success\");\r\n      setLoading(false);\r\n      setSucceed(true);\r\n    }\r\n  }\r\n  //点击删除\r\n  async function handleDel() {\r\n    if (path) {\r\n      let data = await deleteFile(path);\r\n      if (data.code === \"200\") {\r\n        setPath(\"\");\r\n        props.clear();\r\n        setLoading(false);\r\n        setPrpgress(0);\r\n        setSucceed(false);\r\n        setPathName(\"\");\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <section className=\"upload-file\">\r\n        {/* 上传文件 */}\r\n        <Button className=\"btn\" icon={<UploadOutlined />}>\r\n          点击上传\r\n        </Button>\r\n        <input\r\n          type=\"file\"\r\n          className=\"upload-file\"\r\n          onChange={handleUpload}\r\n        ></input>\r\n      </section>\r\n      {pathName && (\r\n        <section className=\"progress-content\">\r\n          {loading && (\r\n            <LoadingOutlined className=\"progress-loading\"></LoadingOutlined>\r\n          )}\r\n          {succeed && (\r\n            <CheckSquareOutlined\r\n              className=\"progress-succeed\"\r\n              style={{ color: \"#67C23A\" }}\r\n            />\r\n          )}\r\n          <span className=\"path-name\">{pathName}</span>\r\n          {/* 进度条 */}\r\n          {progress !== 0 && <progress max=\"100\" value={progress}></progress>}\r\n          {/* 删除 */}\r\n          {succeed && (\r\n            <DeleteOutlined className=\"progress-delete\" onClick={handleDel} />\r\n          )}\r\n        </section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport Progress from \"../../../components/Progress/progress\";\r\nimport \"./addNotice.scss\";\r\nimport { message } from \"../../../api\";\r\nimport { Admin } from \"../../../axios\";\r\nimport { Notice } from \"../../../socket\";\r\nimport { UploadOutlined } from \"@ant-design/icons\";\r\nconst { addNotice, uploadFile } = Admin;\r\nconst { TextArea } = Input;\r\nexport default class AddNotice extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //上传文件地址\r\n    this.filePath = \"\";\r\n    this.state = {\r\n      //时间\r\n      timer: \"\",\r\n      //类型\r\n      type: [],\r\n      //文件名\r\n      fileName: \"\",\r\n      //上传进度\r\n      progress: 0,\r\n    };\r\n  }\r\n\r\n  //提交事件\r\n  handleRef = async () => {\r\n    const loading = message(\"正在提交中\", \"loading\");\r\n    const { title, content } = this.formRef.getFieldValue();\r\n    const result = await addNotice({ title, content, file: this.filePath });\r\n    if (result.code === \"200\") {\r\n      loading.destroy();\r\n      message(\"添加成功\", \"success\");\r\n      Notice(result.data);\r\n      this.props.history.push(\"/admin-index/通知/查看通知\");\r\n    } else {\r\n      message(result.msg);\r\n    }\r\n  };\r\n  //获取上传文件名\r\n  getPath = (path) => {\r\n    this.filePath = path;\r\n  };\r\n  render() {\r\n    return (\r\n      <section className=\"addNotice-container\">\r\n        <section className=\"addNotice-header\">发布通知</section>\r\n        <Form\r\n          onFinish={this.handleRef}\r\n          ref={(from) => (this.formRef = from)}\r\n          labelCol={{\r\n            span: 7,\r\n          }}\r\n          wrapperCol={{\r\n            span: 10,\r\n          }}\r\n          layout=\"horizontal\"\r\n          initialValues={{}}\r\n          size=\"large\"\r\n        >\r\n          <Form.Item\r\n            label=\"标题\"\r\n            name=\"title\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"请输入标题\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item label=\"描述\" name=\"content\">\r\n            <TextArea\r\n              rows={8}\r\n              showCount\r\n              maxLength={100}\r\n              className=\"textArea-input\"\r\n            ></TextArea>\r\n          </Form.Item>\r\n          <Form.Item label=\"上传相关文件\" name=\"file\">\r\n            <Form.Item>\r\n              {/* 进度条 */}\r\n              <Progress\r\n                clear={() => (this.data = \"\")}\r\n                url=\"/admin/uploadFile\"\r\n                path={this.getPath}\r\n              ></Progress>\r\n            </Form.Item>\r\n          </Form.Item>\r\n        </Form>\r\n        <section className=\"refs-container\">\r\n          <Button\r\n            size=\"large\"\r\n            type=\"primary\"\r\n            className=\"refs-btn\"\r\n            onClick={() => this.formRef.submit()}\r\n          >\r\n            提交\r\n          </Button>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}