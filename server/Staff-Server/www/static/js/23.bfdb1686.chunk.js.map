{"version":3,"sources":["pages/Admin/AddNotice/addNotice.jsx"],"names":["addNotice","Admin","TextArea","Input","AddNotice","state","timer","type","handleRef","a","loading","message","formRef","getFieldValue","title","content","result","code","destroy","Notice","data","props","history","push","msg","className","onFinish","this","ref","from","labelCol","span","wrapperCol","layout","initialValues","size","Item","label","name","rules","required","rows","showCount","maxLength","onClick","submit","Component"],"mappings":"4SAWOA,EAAWC,IAAXD,UACCE,EAAaC,IAAbD,SACaE,E,4MAIjBC,MAAM,CAEFC,MAAM,GACNC,KAAK,I,EAITC,U,sBAAU,oCAAAC,EAAA,6DACAC,EAAQC,YAAQ,iCAAQ,WADxB,EAEe,EAAKC,QAAQC,gBAA5BC,EAFA,EAEAA,MAAMC,EAFN,EAEMA,QAFN,SAGaf,EAAU,CAACc,QAAMC,YAH9B,OAIW,SADXC,EAHA,QAIIC,MACNP,EAAQQ,UACRP,YAAQ,2BAAO,WACfQ,YAAOH,EAAOI,MACd,EAAKC,MAAMC,QAAQC,KAAK,uDAGxBZ,YAAQK,EAAOQ,KAXb,2C,4CAeV,WAAS,IAAD,OACR,OACQ,0BAASC,UAAU,sBAAnB,UACG,yBAASA,UAAU,mBAAnB,sCAGC,eAAC,IAAD,CACQC,SAAUC,KAAKnB,UACfoB,IAAK,SAAAC,GAAI,OAAE,EAAKjB,QAAQiB,GACxBC,SAAU,CACNC,KAAM,GAEVC,WAAY,CACRD,KAAM,IAEVE,OAAO,aACPC,cAAe,GAEfC,KAAK,QAZb,UAcQ,cAAC,IAAKC,KAAN,CAAWC,MAAM,eACjBC,KAAK,QACLC,MAAO,CACC,CACIC,UAAU,EACV7B,QAAS,mCALrB,SAQJ,cAAC,IAAD,MAEL,cAAC,IAAKyB,KAAN,CAAWC,MAAM,eAAKC,KAAK,UAA3B,SACS,cAACpC,EAAD,CAAUuC,KAAM,EAAGC,WAAS,EAACC,UAAW,IAAKlB,UAAU,wBAGvD,yBAASA,UAAU,iBAAnB,SACI,cAAC,IAAD,CAASU,KAAK,QAAQ5B,KAAK,UAAWkB,UAAU,WAAWmB,QAAS,kBAAI,EAAKhC,QAAQiC,UAArF,mC,GA7DWC","file":"static/js/23.bfdb1686.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n} from 'antd';\r\nimport \"./addNotice.scss\";\r\nimport {message} from \"../../../api\";\r\nimport {Admin} from \"../../../axios\";\r\nimport {Notice} from \"../../../socket\";\r\n\r\nconst {addNotice}=Admin;\r\nconst { TextArea } = Input;\r\nexport default class AddNotice extends Component {\r\n    // constructor(props){\r\n    //     super(props);\r\n    // }\r\n    state={\r\n        //时间\r\n        timer:'',\r\n        type:[],\r\n\r\n    }\r\n    //提交事件\r\n    handleRef=async()=>{\r\n        const loading=message('正在提交中','loading');\r\n        const{title,content}=this.formRef.getFieldValue()\r\n        const result=await addNotice({title,content});\r\n        if(result.code==='200'){\r\n            loading.destroy();\r\n            message('添加成功','success');\r\n            Notice(result.data);\r\n            this.props.history.push('/admin-index/通知/查看通知');\r\n            // window.location.reload();\r\n        }else{\r\n            message(result.msg);\r\n        }        \r\n    }\r\n    //处理soket消息事件\r\n    render(){\r\n    return (\r\n            <section className=\"addNotice-container\">\r\n               <section className=\"addNotice-header\">\r\n                    发布通知\r\n               </section>\r\n                <Form\r\n                        onFinish={this.handleRef}\r\n                        ref={from=>this.formRef=from}\r\n                        labelCol={{\r\n                            span: 7,\r\n                        }}\r\n                        wrapperCol={{\r\n                            span: 10,\r\n                        }}\r\n                        layout=\"horizontal\"\r\n                        initialValues={{\r\n                        }}\r\n                        size='large'\r\n                        >\r\n                        <Form.Item label=\"标题\"  \r\n                        name='title'\r\n                        rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入标题',\r\n                                },\r\n                        ]}>\r\n                    <Input />\r\n                </Form.Item> \r\n               <Form.Item label=\"描述\" name='content'>\r\n                        <TextArea rows={8} showCount maxLength={100} className=\"textArea-input\"></TextArea>\r\n                    </Form.Item>\r\n                    </Form>\r\n                        <section className=\"refs-container\">\r\n                            <Button  size=\"large\" type=\"primary\"  className=\"refs-btn\" onClick={()=>this.formRef.submit()}>提交</Button>\r\n                        </section>\r\n            </section>\r\n    )\r\n    }\r\n  }"],"sourceRoot":""}